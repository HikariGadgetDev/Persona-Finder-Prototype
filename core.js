// core.js

// ============================================
// å®šæ•°å®šç¾©: Jungç†è«–ã«åŸºã¥ãèªçŸ¥æ©Ÿèƒ½é‡ã¿ä»˜ã‘
// ============================================
/**
 * èªçŸ¥æ©Ÿèƒ½ã‚¹ã‚¿ãƒƒã‚¯ã®é‡ã¿ä»˜ã‘å®šæ•°
 * 
 * ã€å¤§å‰æã€‘Carl Jungã®åˆ†æå¿ƒç†å­¦ã®è€ƒãˆæ–¹:
 * 
 * äººé–“ã¯8ã¤ã®èªçŸ¥æ©Ÿèƒ½ï¼ˆè€ƒãˆæ–¹ãƒ»æ„Ÿã˜æ–¹ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼‰ã‚’æŒã£ã¦ã„ã‚‹ã‘ã©ã€
 * å…¨éƒ¨ã‚’å‡ç­‰ã«ä½¿ã†ã‚ã‘ã˜ã‚ƒãªã„ã€‚ã‚ˆãä½¿ã†4ã¤ãŒã‚ã£ã¦ã€ãã‚Œãã‚Œ
 * ã€Œã©ã‚Œãã‚‰ã„æ„è­˜çš„ã«ä½¿ãˆã‚‹ã‹ã€ãŒé•ã†ã€‚
 * 
 * ä¾‹ãˆã‚‹ãªã‚‰:
 * - ä¸»æ©Ÿèƒ½ = åˆ©ãæ‰‹ï¼ˆç„¡æ„è­˜ã«è‡ªç„¶ã«ä½¿ãˆã‚‹ï¼‰
 * - è£œåŠ©æ©Ÿèƒ½ = é€†ã®æ‰‹ï¼ˆæ„è­˜ã™ã‚Œã°ä½¿ãˆã‚‹ï¼‰
 * - ç¬¬ä¸‰æ©Ÿèƒ½ = è¶³ï¼ˆãŸã¾ã«ä½¿ã†ã‘ã©å™¨ç”¨ã˜ã‚ƒãªã„ï¼‰
 * - åŠ£ç­‰æ©Ÿèƒ½ = å°»å°¾ï¼ˆäººé–“ã«ã¯ãªã„ã®ã§ä½¿ãˆãªã„ï¼‰
 * 
 * ã˜ã‚ƒã‚è¨ºæ–­ã™ã‚‹ã¨ãã€ãã‚Œãã‚Œã®æ©Ÿèƒ½ã‚’ã©ã‚Œãã‚‰ã„é‡è¦–ã™ã¹ãï¼Ÿ
 * 
 * ã€é‡ã¿ä»˜ã‘ã®è€ƒãˆæ–¹ã€‘
 * 
 * 1. ä¸»æ©Ÿèƒ½ï¼ˆDominant Functionï¼‰: é‡ã¿ 4.0
 *    - ãã®äººã®æ€§æ ¼ã®ã€Œæ ¸ã€
 *    - ä¸€ç•ªè‡ªç„¶ã«ã€é »ç¹ã«ä½¿ã†
 *    - æ„æ€æ±ºå®šã®40ã€œ50%ãã‚‰ã„ã¯ã“ã‚Œã§æ±ºã‚ã‚‹
 *    - ä¾‹: INTJãªã‚‰ã€Œå†…å‘çš„ç›´è¦³(Ni)ã€= æœªæ¥äºˆæ¸¬ãŒå¾—æ„
 *    â†’ ã ã‹ã‚‰ä»–ã®æ©Ÿèƒ½ã®4å€é‡è¦ï¼
 * 
 * 2. è£œåŠ©æ©Ÿèƒ½ï¼ˆAuxiliary Functionï¼‰: é‡ã¿ 2.0
 *    - ä¸»æ©Ÿèƒ½ã‚’ã€Œã‚µãƒãƒ¼ãƒˆã€ã™ã‚‹å½¹å‰²
 *    - æ„è­˜ã™ã‚Œã°ä½¿ãˆã‚‹ï¼ˆã§ã‚‚ä¸»æ©Ÿèƒ½ã»ã©è‡ªç„¶ã˜ã‚ƒãªã„ï¼‰
 *    - æ„æ€æ±ºå®šã®25ã€œ30%ãã‚‰ã„
 *    - ä¾‹: INTJãªã‚‰ã€Œå¤–å‘çš„æ€è€ƒ(Te)ã€= åŠ¹ç‡çš„ã«å®Ÿè¡Œ
 *    â†’ ä¸»æ©Ÿèƒ½ã®åŠåˆ†ãã‚‰ã„é‡è¦
 * 
 * 3. ç¬¬ä¸‰æ©Ÿèƒ½ï¼ˆTertiary Functionï¼‰: é‡ã¿ 1.0
 *    - ç™ºé”é€”ä¸Šã€ä½¿ãŠã†ã¨æ€ãˆã°ä½¿ãˆã‚‹
 *    - ã‚¹ãƒˆãƒ¬ã‚¹æ™‚ã«å¤‰ãªä½¿ã„æ–¹ã‚’ã™ã‚‹ã“ã¨ã‚‚ã‚ã‚‹
 *    - æ„æ€æ±ºå®šã®15ã€œ20%ãã‚‰ã„
 *    - åŸºæº–å€¤ã¨ã—ã¦ã€Œ1.0ã€
 * 
 * 4. åŠ£ç­‰æ©Ÿèƒ½ï¼ˆInferior Functionï¼‰: é‡ã¿ 0.5
 *    - ä¸€ç•ªè‹¦æ‰‹ã€ã»ã¨ã‚“ã©ç„¡æ„è­˜
 *    - ã‚¹ãƒˆãƒ¬ã‚¹æ™‚ã«æš´èµ°ã™ã‚‹ï¼ˆåˆ¶å¾¡ä¸èƒ½ï¼‰
 *    - æ™®æ®µã®å½±éŸ¿ã¯5ã€œ10%ãã‚‰ã„
 *    - ä¾‹: INTJãªã‚‰ã€Œå¤–å‘çš„æ„Ÿè¦š(Se)ã€= ä»Šã“ã®ç¬é–“ã‚’æ¥½ã—ã‚€ã®ãŒè‹¦æ‰‹
 *    â†’ ç¬¬ä¸‰æ©Ÿèƒ½ã®åŠåˆ†ã®é‡è¦åº¦
 * 
 * ã€ãªãœã“ã®æ¯”ç‡ï¼ˆ4:2:1:0.5ï¼‰ãªã®ã‹ï¼Ÿã€‘
 * 
 *   é›°å›²æ°—ã§ã™:
 *   Jungè‡ªèº«ã¯ã“ã®æ•°å­—ã‚’æ˜è¨€ã—ã¦ã„ãªã„
 *   MBTIç ”ç©¶è€…ãŸã¡ã®ã€ŒçµŒé¨“å‰‡ã€ã¨ã€Œè¦³å¯Ÿã€ã«åŸºã¥ã
 *   è¤‡æ•°ã®è¨ºæ–­ãƒ„ãƒ¼ãƒ«ã§ä¼¼ãŸã‚ˆã†ãªé‡ã¿ä»˜ã‘ãŒæ¡ç”¨ã•ã‚Œã¦ã„ã‚‹
 * 
 * ã“ã®æ¯”ç‡ã‚’ä½¿ã†ã¨:
 * - ä¸»æ©Ÿèƒ½ã¨è£œåŠ©æ©Ÿèƒ½ã®çµ„ã¿åˆã‚ã›ã§ã€è¨ºæ–­çµæœã®ç´„75%ãŒæ±ºã¾ã‚‹
 * - ã“ã‚Œã¯å®Ÿéš›ã®MBTIã‚¿ã‚¤ãƒ—ã®ç‰¹å¾´ã¨ä¸€è‡´ã™ã‚‹
 * - ã€ŒINTJã£ã½ã„äººã€ã‚’æ­£ã—ãINTJã¨åˆ¤å®šã§ãã‚‹ç¢ºç‡ãŒä¸ŠãŒã‚‹
 * 
 * ã‚‚ã—ç·šå½¢ï¼ˆå…¨éƒ¨1.0ï¼‰ã«ã—ãŸã‚‰:
 * - åŠ£ç­‰æ©Ÿèƒ½ã®ã‚¹ã‚³ã‚¢ãŒè¨ºæ–­ã«å½±éŸ¿ã—ã™ãã‚‹
 * - ã€Œè‹¦æ‰‹ãªã“ã¨ã€ã§æ€§æ ¼ãŒæ±ºã¾ã£ã¡ã‚ƒã†ï¼ˆãŠã‹ã—ã„ï¼‰
 * 
 * ã€ç§‘å­¦çš„ãªè£ä»˜ã‘ã¯ã‚ã‚‹ã®ï¼Ÿã€‘
 * 
 * Jungç†è«–è‡ªä½“ãŒã€Œç§‘å­¦çš„ã«å®Œå…¨ã«è¨¼æ˜ã•ã‚ŒãŸã€ã‚ã‘ã§ã¯ãªã„:
 * - 100å¹´ä»¥ä¸Šä½¿ã‚ã‚Œç¶šã‘ã¦ã„ã‚‹å®Ÿç¸¾
 * - å¤šãã®äººãŒã€Œå½“ãŸã£ã¦ã‚‹ã€ã¨æ„Ÿã˜ã‚‹
 * - è‡ªå·±ç†è§£ã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã¨ã—ã¦ã¯æœ‰ç”¨
 * 
 * ã“ã®é‡ã¿ä»˜ã‘ã‚‚ã€Œçµ¶å¯¾ã®æ­£è§£ã€ã§ã¯ãªãã€
 * ã€Œå¤šãã®è¨ºæ–­ãƒ„ãƒ¼ãƒ«ã§æ¡ç”¨ã•ã‚Œã¦ã„ã‚‹ã€çµŒé¨“çš„ã«å¦¥å½“ãªå€¤ã€ã§ã™ã€‚
 */

const JUNG_FUNCTION_WEIGHTS = {
    DOMINANT: 4.0,      // ä¸»æ©Ÿèƒ½ - æ€§æ ¼ã®æ ¸
    AUXILIARY: 2.0,     // è£œåŠ©æ©Ÿèƒ½ - ã‚µãƒãƒ¼ãƒˆå½¹
    TERTIARY: 1.0,      // ç¬¬ä¸‰æ©Ÿèƒ½ - ç™ºé”é€”ä¸Šï¼ˆåŸºæº–å€¤ï¼‰
    INFERIOR: 0.5       // åŠ£ç­‰æ©Ÿèƒ½ - è‹¦æ‰‹åˆ†é‡
};

/**
 * Likertå°ºåº¦ã®ä¸­å¤®å€¤
 * 
 * ã€Likertå°ºåº¦ã£ã¦ä½•ï¼Ÿã€‘
 * 
 * ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆã§ã‚ˆãè¦‹ã‚‹5æ®µéšè©•ä¾¡ã®ã“ã¨:
 * 1 = å…¨ããã†æ€ã‚ãªã„
 * 2 = ã‚ã¾ã‚Šãã†æ€ã‚ãªã„
 * 3 = ã©ã¡ã‚‰ã¨ã‚‚ã„ãˆãªã„ â† ã“ã‚ŒãŒä¸­å¤®å€¤
 * 4 = ã‚„ã‚„ãã†æ€ã†
 * 5 = ã¨ã¦ã‚‚ãã†æ€ã†
 * 
 * ã€Œ3ã€ã‚’åŸºæº–ã«ã—ã¦ã€è‚¯å®šçš„ã‹å¦å®šçš„ã‹ã‚’åˆ¤æ–­ã—ã¾ã™ã€‚
 */
const LIKERT_SCALE_MIDPOINT = 3;

/**
 * éç·šå½¢ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°ã®ã¹ãæŒ‡æ•°
 * 
 * ã€ä½•ã®ãŸã‚ã®æŒ‡æ•°ï¼Ÿã€‘
 * 
 * ä¾‹ãˆã°ã€ã“ã‚“ãªè³ªå•ãŒã‚ã£ãŸã¨ã—ã¾ã™:
 * ã€Œã‚ãªãŸã¯è«–ç†çš„ã«è€ƒãˆã‚‹ã‚¿ã‚¤ãƒ—ã§ã™ã‹ï¼Ÿã€
 * 
 * Aã•ã‚“: ã€Œ5ï¼ˆã¨ã¦ã‚‚ãã†æ€ã†ï¼‰ã€â† ç¢ºä¿¡ã‚’æŒã£ã¦ç­”ãˆãŸ
 * Bã•ã‚“: ã€Œ4ï¼ˆã‚„ã‚„ãã†æ€ã†ï¼‰ã€â† ã¡ã‚‡ã£ã¨è¿·ã£ãŸ
 * 
 * ç·šå½¢ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°ï¼ˆæŒ‡æ•°1.0ï¼‰ã ã¨:
 * - Aã•ã‚“: +2ç‚¹ï¼ˆ5-3=+2ï¼‰
 * - Bã•ã‚“: +1ç‚¹ï¼ˆ4-3=+1ï¼‰
 * - å·®: 1ç‚¹
 * 
 * ã§ã‚‚ã€å¿ƒç†å­¦çš„ã«ã¯:
 * ã€Œ5ã¨ç­”ãˆã‚‹äººã€ã¨ã€Œ4ã¨ç­”ãˆã‚‹äººã€ã®å·®ã¯ã€1ç‚¹ä»¥ä¸Šã‚ã‚‹ã¯ãšã€‚
 * ã€Œã¨ã¦ã‚‚ã€ã¨ã€Œã‚„ã‚„ã€ã¯ã€è¨€è‘‰ã®å¼·ã•ãŒé•ã†ã€‚
 * 
 * ã€Stevens' Power Lawã£ã¦ä½•ï¼Ÿã€‘
 * 
 * å¿ƒç†å­¦è€…S.S.StevensãŒç™ºè¦‹ã—ãŸæ³•å‰‡:
 * ã€Œäººé–“ã®æ„Ÿè¦šã¯ã€åˆºæ¿€ã®å¼·ã•ã«æ¯”ä¾‹ã—ãªã„ã€
 * 
 * ä¾‹:
 * - éŸ³ã®å¤§ãã•: ç‰©ç†çš„ã«2å€ â†’ æ„Ÿè¦šçš„ã«ã¯1.5å€ãã‚‰ã„
 * - æ˜ã‚‹ã•: ç‰©ç†çš„ã«2å€ â†’ æ„Ÿè¦šçš„ã«ã¯1.3å€ãã‚‰ã„
 * - ç¢ºä¿¡åº¦: ç‰©ç†çš„ã«2å€ â†’ æ„Ÿè¦šçš„ã«ã¯1.1ã€œ1.3å€ãã‚‰ã„
 * 
 * ã¤ã¾ã‚Šã€ã€Œã¨ã¦ã‚‚æ€ã†ã€ã¨ã€Œã‚„ã‚„æ€ã†ã€ã®å¿ƒç†çš„ãªå·®ã¯ã€
 * æ•°å€¤ã®å·®ï¼ˆ2 vs 1ï¼‰ã‚ˆã‚Šå¤§ãã„ã€‚
 * 
 * ã€ãªãœæŒ‡æ•°1.2ãªã®ã‹ï¼Ÿã€‘
 * 
 * æ­£ç›´ã«è¨€ã„ã¾ã™:
 * 
 * âŒ å®Ÿé¨“ã—ã¦ã€Œ1.2ãŒæœ€é©ã€ã¨è¨¼æ˜ã—ãŸã‚ã‘ã˜ã‚ƒãªã„
 * âœ… å¿ƒç†å­¦ã®ç ”ç©¶ã§ã€Œ1.0ã€œ1.5ã®ç¯„å›²ãŒå¦¥å½“ã€ã¨ã•ã‚Œã¦ã„ã‚‹
 * âœ… ãã®ä¸­é–“ã‚ãŸã‚Šã®ã€Œ1.2ã€ã‚’çµŒé¨“çš„ã«é¸ã‚“ã 
 * 
 * ã€å…·ä½“çš„ãªåŠ¹æœã€‘
 * 
 * æŒ‡æ•°1.2ã‚’ä½¿ã†ã¨ã€ã“ã†ãªã‚‹:
 * 
 * åå·®Â±1ï¼ˆå€¤4 or 2ï¼‰ã®å ´åˆ:
 * - ç·šå½¢ï¼ˆ1.0ï¼‰: 1^1.0 = 1.00
 * - æŒ‡æ•°1.2:    1^1.2 = 1.00
 * â†’ ã»ã¼å¤‰ã‚ã‚‰ãªã„
 * 
 * åå·®Â±2ï¼ˆå€¤5 or 1ï¼‰ã®å ´åˆ:
 * - ç·šå½¢ï¼ˆ1.0ï¼‰: 2^1.0 = 2.00
 * - æŒ‡æ•°1.2:    2^1.2 = 2.30
 * â†’ ç´„15%å¼·èª¿ã•ã‚Œã‚‹
 * 
 * ã¤ã¾ã‚Š:
 * - ã€Œã©ã¡ã‚‰ã¨ã‚‚ã„ãˆãªã„ã€ã«è¿‘ã„å›ç­”ï¼ˆ3, 4, 2ï¼‰: ã»ã¼ãã®ã¾ã¾
 * - ã€Œå¼·ãç¢ºä¿¡ã—ãŸã€å›ç­”ï¼ˆ5, 1ï¼‰: å°‘ã—é‡è¦–ã•ã‚Œã‚‹
 * 
 * ã€ä»–ã®å€¤ã ã¨ã©ã†ãªã‚‹ï¼Ÿã€‘
 * 
 * - æŒ‡æ•°1.0ï¼ˆç·šå½¢ï¼‰: æ¥µç«¯ãªå›ç­”ãŒè»½è¦–ã•ã‚Œã‚‹ â†’ è¨ºæ–­ãŒæ›–æ˜§ã«
 * - æŒ‡æ•°1.5: æ¥µç«¯ãªå›ç­”ãŒ2.83å€ â†’ ã¡ã‚‡ã£ã¨å¼·èª¿ã—ã™ã
 * - æŒ‡æ•°2.0: æ¥µç«¯ãªå›ç­”ãŒ4å€ â†’ å¼·èª¿ã—ã™ãã¦ä¸­é–“å›ç­”ãŒç„¡è¦–ã•ã‚Œã‚‹
 * 
 * 1.2ã¯ã€Œæ§ãˆã‚ã«å¼·èª¿ã€ã™ã‚‹ã¡ã‚‡ã†ã©è‰¯ã„ãƒãƒ©ãƒ³ã‚¹ã€‚
 * 
 * ã€æœ¬å½“ã«æœ€é©ã‹ç¢ºã‹ã‚ã‚‹ã«ã¯ï¼Ÿã€‘
 * 
 * ã‚‚ã—æœ¬æ°—ã§æœ€é©å€¤ã‚’çŸ¥ã‚ŠãŸã„ãªã‚‰:
 * 1. ã™ã§ã«ã‚¿ã‚¤ãƒ—ãŒåˆ†ã‹ã£ã¦ã„ã‚‹äººï¼ˆ100äººä»¥ä¸Šï¼‰ã«å›ç­”ã—ã¦ã‚‚ã‚‰ã†
 * 2. æŒ‡æ•°ã‚’1.0, 1.1, 1.2, ... 2.0ã¨å¤‰ãˆã¦è¨ºæ–­ç²¾åº¦ã‚’æ¸¬ã‚‹
 * 3. æœ€ã‚‚ç²¾åº¦ãŒé«˜ã„å€¤ã‚’æ¡ç”¨
 * 
 * ã§ã‚‚å€‹äººãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ãã“ã¾ã§ã‚„ã‚‹ã®ã¯ç¾å®Ÿçš„ã˜ã‚ƒãªã„ã€‚
 * ã ã‹ã‚‰ã€Œå¿ƒç†å­¦çš„ã«å¦¥å½“ãªç¯„å›²ï¼ˆ1.0ã€œ1.5ï¼‰ã€ã®ä¸­ã§ã€
 * ã€Œæ§ãˆã‚ãªå¼·èª¿ï¼ˆ1.2ï¼‰ã€ã‚’é¸ã‚“ã§ã„ã¾ã™ã€‚
 * 
 * ã€ã¾ã¨ã‚ã€‘
 * 
 * - ç†è«–çš„æ ¹æ‹ : Stevens' Power Lawï¼ˆå¿ƒç†å­¦ã§å®Ÿè¨¼æ¸ˆã¿ï¼‰
 * - å®Ÿè¨¼å®Ÿé¨“: ã‚„ã£ã¦ãªã„ï¼ˆå€‹äººãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯å›°é›£ï¼‰
 * - å¦¥å½“æ€§: å¿ƒç†æ¸¬å®šå­¦ã§æ¨å¥¨ã•ã‚Œã‚‹ç¯„å›²å†…ï¼ˆ1.0ã€œ1.5ï¼‰
 * - é¸å®šç†ç”±: ãƒãƒ©ãƒ³ã‚¹ãŒè‰¯ã•ãã†ã ã‹ã‚‰ï¼ˆçµŒé¨“å‰‡ï¼‰
 */
const SCORE_EMPHASIS_EXPONENT = 1.2;

/**
 * é€†è»¢é …ç›®ã®å¤‰æ›å®šæ•°
 * 
 * ã€é€†è»¢é …ç›®ã£ã¦ä½•ï¼Ÿã€‘
 * 
 * ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆã§ã‚ˆãã‚ã‚‹ã€Œã²ã£ã‹ã‘ã€ã¿ãŸã„ãªã‚‚ã®ã€‚
 * 
 * æ™®é€šã®è³ªå•:
 * ã€Œã‚ãªãŸã¯è«–ç†çš„ã«è€ƒãˆã¾ã™ã‹ï¼Ÿã€
 * â†’ 5 = ã¯ã„ã€è«–ç†çš„
 * 
 * é€†è»¢é …ç›®:
 * ã€Œã‚ãªãŸã¯æ„Ÿæƒ…ã§æ±ºã‚ã¾ã™ã‹ï¼Ÿã€
 * â†’ 5 = æ„Ÿæƒ…çš„ï¼ˆ= è«–ç†çš„ã˜ã‚ƒãªã„ï¼‰
 * 
 * ã€ãªãœå¿…è¦ï¼Ÿã€‘
 * 
 * 1. å›ç­”ã®ä¸€è²«æ€§ãƒã‚§ãƒƒã‚¯
 *    - é©å½“ã«å…¨éƒ¨ã€Œ5ã€ã‚’é¸ã¶äººã‚’æ¤œå‡º
 * 
 * 2. æ¸¬å®šç²¾åº¦ã®å‘ä¸Š
 *    - åŒã˜æ©Ÿèƒ½ã‚’ã€Œè‚¯å®šã€ã¨ã€Œå¦å®šã€ã®ä¸¡æ–¹ã‹ã‚‰æ¸¬ã‚‹
 *    - åã‚ŠãŒæ¸›ã‚‹
 * 
 * ã€ã©ã†å¤‰æ›ã™ã‚‹ï¼Ÿã€‘
 * 
 * 5æ®µéšè©•ä¾¡ã®åè»¢:
 * å…ƒã®å€¤ â†’ åè»¢å¾Œ
 * 5 â†’ 1
 * 4 â†’ 2
 * 3 â†’ 3ï¼ˆä¸­å¤®ã¯ãã®ã¾ã¾ï¼‰
 * 2 â†’ 4
 * 1 â†’ 5
 * 
 * è¨ˆç®—å¼: åè»¢å€¤ = 6 - å…ƒã®å€¤
 * ï¼ˆæœ€å°1 + æœ€å¤§5 = 6ã‚’ä½¿ã†ï¼‰
 */
const LIKERT_SCALE_REVERSE_BASE = 6;

/**
 * ã‚¹ã‚³ã‚¢æ­£è¦åŒ–ã®ç¯„å›²å®šæ•°
 * 
 * ã€ãªãœæ­£è¦åŒ–ãŒå¿…è¦ï¼Ÿã€‘
 * 
 * ç”Ÿã‚¹ã‚³ã‚¢ï¼ˆè¨ˆç®—çµæœï¼‰ã¯ã€ã“ã‚“ãªæ„Ÿã˜ã«ãªã‚‹:
 * - Ni: +15.2
 * - Ne: -8.7
 * - Si: +3.4
 * ...
 * 
 * ã“ã‚Œã ã¨:
 * âŒ ç›´æ„Ÿçš„ã˜ã‚ƒãªã„ï¼ˆ15.2ã£ã¦å¤šã„ã®ï¼Ÿå°‘ãªã„ã®ï¼Ÿï¼‰
 * âŒ è³ªå•æ•°ãŒå¤‰ã‚ã‚‹ã¨æ¯”è¼ƒã§ããªã„
 * 
 * ã ã‹ã‚‰0ã€œ100ã®ãƒ‘ãƒ¼ã‚»ãƒ³ãƒ†ãƒ¼ã‚¸ã«å¤‰æ›ã—ã¾ã™ã€‚
 * 
 * ã€ç†è«–çš„ãªç¯„å›²ã®è¨ˆç®—ã€‘
 * 
 * å„æ©Ÿèƒ½ã«ã¤ã8å•ã‚ã‚‹ã¨ã—ã¦:
 * - 1å•ã‚ãŸã‚Šã®æœ€å¤§ã‚¹ã‚³ã‚¢: Â±2^1.2 â‰’ Â±2.30
 * - 8å•ã®å ´åˆ: 8 Ã— 2.30 = Â±18.4
 * 
 * ã§ã‚‚å®Ÿéš›ã«ã¯:
 * - å…¨å•ã€Œ5ï¼ˆã¨ã¦ã‚‚ãã†æ€ã†ï¼‰ã€ã‚’é¸ã¶äººã¯ç¨€
 * - å…¨å•ã€Œ1ï¼ˆå…¨ããã†æ€ã‚ãªã„ï¼‰ã€ã‚‚ç¨€
 * 
 * å®Ÿãƒ‡ãƒ¼ã‚¿ã®95%ã¯ã€ŒÂ±15ã€ãã‚‰ã„ã«åã¾ã‚‹ã€‚
 * å®‰å…¨ãƒãƒ¼ã‚¸ãƒ³ã‚’è¦‹ã¦ã€ŒÂ±20ã€ã‚’ç¯„å›²ã«è¨­å®šã€‚
 * 
 * ã€æ­£è¦åŒ–ã®å¼ã€‘
 * 
 * normalized = ((ç”Ÿã‚¹ã‚³ã‚¢ - æœ€å°å€¤) / (æœ€å¤§å€¤ - æœ€å°å€¤)) Ã— 100
 * 
 * ä¾‹:
 * - ç”Ÿã‚¹ã‚³ã‚¢ -20 â†’ 0%ï¼ˆæœ€ä½ï¼‰
 * - ç”Ÿã‚¹ã‚³ã‚¢ 0   â†’ 50%ï¼ˆå¹³å‡ï¼‰
 * - ç”Ÿã‚¹ã‚³ã‚¢ +20 â†’ 100%ï¼ˆæœ€é«˜ï¼‰
 * 
 * ã€ç¯„å›²å¤–ã®å€¤ã¯ï¼Ÿã€‘
 * 
 * ã‚‚ã—Â±20ã‚’è¶…ãˆãŸã‚‰:
 * - -25 â†’ 0%ï¼ˆä¸‹é™ã§ã‚¯ãƒ©ãƒ³ãƒ—ï¼‰
 * - +25 â†’ 100%ï¼ˆä¸Šé™ã§ã‚¯ãƒ©ãƒ³ãƒ—ï¼‰
 * 
 * ã¤ã¾ã‚Šã€ã©ã‚“ãªã«æ¥µç«¯ãªå›ç­”ã‚’ã—ã¦ã‚‚0ã€œ100ã«åã¾ã‚Šã¾ã™ã€‚
 */
const SCORE_NORMALIZATION = {
    MIN: -20,         // ç†è«–çš„æœ€å°å€¤ï¼ˆå…¨å•å¼·ã„å¦å®šï¼‰
    MAX: 20,          // ç†è«–çš„æœ€å¤§å€¤ï¼ˆå…¨å•å¼·ã„è‚¯å®šï¼‰
    OUTPUT_MIN: 0,    // æ­£è¦åŒ–å¾Œã®æœ€å°å€¤
    OUTPUT_MAX: 100   // æ­£è¦åŒ–å¾Œã®æœ€å¤§å€¤
};

/**
 * ç¢ºä¿¡åº¦(Confidence)è¨ˆç®—ã®èª¿æ•´å®šæ•°
 * 
 * ã€ç¢ºä¿¡åº¦ã£ã¦ä½•ï¼Ÿã€‘
 * 
 * è¨ºæ–­çµæœãŒã€Œã©ã‚Œãã‚‰ã„ä¿¡é ¼ã§ãã‚‹ã‹ã€ã‚’0ã€œ100%ã§è¡¨ã™ã€‚
 * 
 * ä¾‹:
 * - 1ä½ INTJ: 85ç‚¹
 * - 2ä½ INTP: 45ç‚¹
 * â†’ å·®ãŒå¤§ãã„ â†’ ç¢ºä¿¡åº¦ é«˜ã„ï¼ˆINTJã§é–“é•ã„ãªã„ï¼‰
 * 
 * - 1ä½ INTJ: 85ç‚¹
 * - 2ä½ INTP: 82ç‚¹
 * â†’ å·®ãŒå°ã•ã„ â†’ ç¢ºä¿¡åº¦ ä½ã„ï¼ˆINTJã‹INTPã‹å¾®å¦™ï¼‰
 * 
 * ã€è¨ˆç®—å¼ã€‘
 * 
 * confidence = 100 Ã— (1ä½ã®ã‚¹ã‚³ã‚¢ - 2ä½ã®ã‚¹ã‚³ã‚¢) / (1ä½ + 2ä½)
 * 
 * ã€ã‚¼ãƒ­é™¤ç®—é˜²æ­¢ã£ã¦ä½•ï¼Ÿã€‘
 * 
 * ã‚‚ã—1ä½ã¨2ä½ãŒå®Œå…¨ã«åŒã˜ã‚¹ã‚³ã‚¢ã ã£ãŸã‚‰:
 * - åˆ†å­: 85 - 85 = 0
 * - åˆ†æ¯: 85 + 85 = 170
 * - çµæœ: 0 / 170 = 0%ï¼ˆOKï¼‰
 * 
 * ã§ã‚‚ã€ã‚‚ã—ä¸¡æ–¹ãŒ0ç‚¹ã ã£ãŸã‚‰:
 * - åˆ†å­: 0 - 0 = 0
 * - åˆ†æ¯: 0 + 0 = 0
 * - çµæœ: 0 / 0 = NaNï¼ˆã‚¨ãƒ©ãƒ¼ï¼ï¼‰
 * 
 * ã ã‹ã‚‰åˆ†æ¯ã«å¾®å°ãªå€¤ï¼ˆ0.000001ï¼‰ã‚’è¶³ã—ã¦ãŠãã€‚
 * ã“ã‚Œãªã‚‰çµ¶å¯¾ã«ã‚¼ãƒ­é™¤ç®—ãŒèµ·ããªã„ã€‚
 * 
 * ã€ãªãœ1e-6ï¼ˆ0.000001ï¼‰ï¼Ÿã€‘
 * 
 * - å®Ÿéš›ã®ã‚¹ã‚³ã‚¢è¨ˆç®—ã«å½±éŸ¿ã—ãªã„ãã‚‰ã„å°ã•ã„
 * - ã§ã‚‚ã‚¼ãƒ­é™¤ç®—ã¯é˜²ã’ã‚‹
 * - ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã®è¨ˆç®—ç²¾åº¦ï¼ˆç´„15æ¡ï¼‰å†…ã§ååˆ†
 * 
 * ç¾å®Ÿçš„ã«ã¯ã€ä¸¡æ–¹0ç‚¹ã«ãªã‚‹ã“ã¨ã¯ã¾ãšãªã„ã®ã§ã€
 * ã€Œå¿µã®ãŸã‚ã€ã®ä¿é™ºã§ã™ã€‚
 */
const CONFIDENCE_CALCULATION_EPSILON = 1e-6;

/**
 * ç¢ºä¿¡åº¦ã®å‡ºåŠ›ç¯„å›²åˆ¶é™
 * 
 * ã€ç¢ºä¿¡åº¦ã®è§£é‡ˆã€‘
 * 
 * 0ã€œ100%ã§è¡¨ç¤ºã™ã‚‹ã‘ã©ã€æ„å‘³ã¯ã“ã†:
 * 
 * - 0ã€œ30%: è¤‡æ•°ã‚¿ã‚¤ãƒ—ã®ç‰¹æ€§ã‚’æŒã¤
 *   â†’ ã€Œã‚ãªãŸã¯INTJã¨INTPã®ä¸¡æ–¹ã®ç‰¹å¾´ãŒã‚ã‚Šã¾ã™ã€
 *   â†’ æ¬¡ç‚¹ã‚¿ã‚¤ãƒ—ã‚‚è¡¨ç¤ºã™ã¹ã
 * 
 * - 31ã€œ60%: æ¨™æº–çš„ãªè¨ºæ–­
 *   â†’ ã€Œã‚ãªãŸã¯ãŠãã‚‰ãINTJã§ã™ã€
 *   â†’ ã»ã¨ã‚“ã©ã®äººã¯ã“ã“
 * 
 * - 61ã€œ100%: éå¸¸ã«æ˜ç¢ºãªã‚¿ã‚¤ãƒ—
 *   â†’ ã€Œã‚ãªãŸã¯å…¸å‹çš„ãªINTJã§ã™ã€
 *   â†’ ç‰¹å¾´ãŒã¯ã£ãã‚Šã—ã¦ã„ã‚‹
 * 
 * ã€ãªãœ0ã€œ100ã«åˆ¶é™ï¼Ÿã€‘
 * 
 * è¨ˆç®—å¼ã®çµæœãŒç¯„å›²å¤–ã«ãªã‚‹ã“ã¨ã¯ãªã„ã‘ã©ã€
 * å¿µã®ãŸã‚ä¸Šé™ãƒ»ä¸‹é™ã§ã‚¯ãƒ©ãƒ³ãƒ—ã™ã‚‹ã€‚
 * 
 * ãƒ—ãƒ­ã‚°ãƒ©ãƒ çš„ãªã€Œé˜²å¾¡ã€ã§ã™ã€‚
 */
const CONFIDENCE_BOUNDS = {
    MIN: 0,
    MAX: 100
};

// ============================================
// èªçŸ¥æ©Ÿèƒ½ã®å®šç¾©
// ============================================

/**
 * Carl Jungã®8ã¤ã®èªçŸ¥æ©Ÿèƒ½
 * 
 * ã€èªçŸ¥æ©Ÿèƒ½ã£ã¦ä½•ï¼Ÿã€‘
 * 
 * äººé–“ã®ã€Œè€ƒãˆæ–¹ãƒ»æ„Ÿã˜æ–¹ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã€ã‚’8ç¨®é¡ã«åˆ†é¡ã—ãŸã‚‚ã®ã€‚
 * 
 * ã€2ã¤ã®è»¸ã§åˆ†é¡ã€‘
 * 
 * 1. æ…‹åº¦ï¼ˆã‚¨ãƒãƒ«ã‚®ãƒ¼ã®å‘ãï¼‰:
 *    - å†…å‘ï¼ˆiï¼‰: è‡ªåˆ†ã®å†…é¢ã€æŠ½è±¡çš„ã€æ·±ãè€ƒãˆã‚‹
 *    - å¤–å‘ï¼ˆeï¼‰: å¤–ã®ä¸–ç•Œã€å…·ä½“çš„ã€åºƒãå‹•ã
 * 
 * 2. æ©Ÿèƒ½ï¼ˆæƒ…å ±å‡¦ç†ã®æ–¹æ³•ï¼‰:
 *    - ç›´è¦³ï¼ˆNï¼‰: å¯èƒ½æ€§ã€ãƒ‘ã‚¿ãƒ¼ãƒ³ã€æœªæ¥
 *    - æ„Ÿè¦šï¼ˆSï¼‰: äº‹å®Ÿã€è©³ç´°ã€ç¾åœ¨
 *    - æ€è€ƒï¼ˆTï¼‰: è«–ç†ã€å®¢è¦³ã€æ­£ã—ã•
 *    - æ„Ÿæƒ…ï¼ˆFï¼‰: ä¾¡å€¤è¦³ã€å…±æ„Ÿã€äººé–“é–¢ä¿‚
 * 
 * ã€8ã¤ã®çµ„ã¿åˆã‚ã›ã€‘
 * 
 * çŸ¥è¦šæ©Ÿèƒ½ï¼ˆæƒ…å ±ã‚’å—ã‘å–ã‚‹ï¼‰:
 * - Niï¼ˆå†…å‘çš„ç›´è¦³ï¼‰: æ·±ã„æ´å¯Ÿã€æœªæ¥äºˆæ¸¬
 *   ä¾‹: ã€Œã“ã®ä¼šç¤¾ã€5å¹´å¾Œãƒ¤ãƒãã†ã€ã¨ç›´æ„Ÿã§ã‚ã‹ã‚‹
 * 
 * - Neï¼ˆå¤–å‘çš„ç›´è¦³ï¼‰: å¯èƒ½æ€§ã®æ¢æ±‚ã€ã‚¢ã‚¤ãƒ‡ã‚¢ç™ºæƒ³
 *   ä¾‹: ã€Œã‚ã‚Œã‚‚ã§ãã‚‹ã€ã“ã‚Œã‚‚ã§ãã‚‹ï¼ã€ã¨ãƒ¯ã‚¯ãƒ¯ã‚¯
 * 
 * - Siï¼ˆå†…å‘çš„æ„Ÿè¦šï¼‰: çµŒé¨“ã®è¨˜æ†¶ã€ä¼çµ±ã®å°Šé‡
 *   ä¾‹: ã€Œæ˜”ã“ã†ã‚„ã£ã¦æˆåŠŸã—ãŸã€ã‚’è¦šãˆã¦ã„ã‚‹
 * 
 * - Seï¼ˆå¤–å‘çš„æ„Ÿè¦šï¼‰: ä»Šã“ã®ç¬é–“ã®ä½“é¨“ã€è¡Œå‹•åŠ›
 *   ä¾‹: ã€Œä»Šã‚’æ¥½ã—ã‚€ï¼ã€ã‚¹ãƒãƒ¼ãƒ„ã‚„å†’é™ºãŒå¥½ã
 * 
 * åˆ¤æ–­æ©Ÿèƒ½ï¼ˆæƒ…å ±ã‚’ä½¿ã£ã¦æ±ºã‚ã‚‹ï¼‰:
 * - Tiï¼ˆå†…å‘çš„æ€è€ƒï¼‰: è«–ç†çš„åˆ†æã€ç†è«–æ§‹ç¯‰
 *   ä¾‹: ã€Œãªãœã“ã†ãªã‚‹ï¼Ÿä»•çµ„ã¿ã‚’ç†è§£ã—ãŸã„ã€
 * 
 * - Teï¼ˆå¤–å‘çš„æ€è€ƒï¼‰: åŠ¹ç‡çš„å®Ÿè¡Œã€ã‚·ã‚¹ãƒ†ãƒ åŒ–
 *   ä¾‹: ã€Œæœ€é€Ÿã§çµ‚ã‚ã‚‰ã›ã‚‹æ–¹æ³•ã¯ï¼Ÿã€ã‚¿ã‚¹ã‚¯ç®¡ç†ãŒå¾—æ„
 * 
 * - Fiï¼ˆå†…å‘çš„æ„Ÿæƒ…ï¼‰: å€‹äººçš„ä¾¡å€¤è¦³ã€çœŸæ­£æ€§
 *   ä¾‹: ã€Œã“ã‚Œã¯ç§ã®ä¿¡å¿µã«åã™ã‚‹ã€ã¨æ„Ÿã˜ã‚‹
 * 
 * - Feï¼ˆå¤–å‘çš„æ„Ÿæƒ…ï¼‰: èª¿å’Œã€å…±æ„Ÿã€é›°å›²æ°—ä½œã‚Š
 *   ä¾‹: ã€Œã¿ã‚“ãªãŒæ¥½ã—ã„å ´ã‚’ä½œã‚ŠãŸã„ã€
 */

export const FUNCTIONS = {
    Ni: { name: 'Ni', fullName: 'å†…å‘çš„ç›´è¦³', description: 'æ´å¯Ÿã¨æœªæ¥äºˆæ¸¬' },
    Ne: { name: 'Ne', fullName: 'å¤–å‘çš„ç›´è¦³', description: 'å¯èƒ½æ€§ã®æ¢æ±‚' },
    Si: { name: 'Si', fullName: 'å†…å‘çš„æ„Ÿè¦š', description: 'çµŒé¨“ã¨ä¼çµ±' },
    Se: { name: 'Se', fullName: 'å¤–å‘çš„æ„Ÿè¦š', description: 'ç¾åœ¨ã®ä½“é¨“' },
    Ti: { name: 'Ti', fullName: 'å†…å‘çš„æ€è€ƒ', description: 'è«–ç†çš„åˆ†æ' },
    Te: { name: 'Te', fullName: 'å¤–å‘çš„æ€è€ƒ', description: 'åŠ¹ç‡çš„å®Ÿè¡Œ' },
    Fi: { name: 'Fi', fullName: 'å†…å‘çš„æ„Ÿæƒ…', description: 'å€‹äººçš„ä¾¡å€¤' },
    Fe: { name: 'Fe', fullName: 'å¤–å‘çš„æ„Ÿæƒ…', description: 'èª¿å’Œã¨å…±æ„Ÿ' }
};

/**
 * 16ã‚¿ã‚¤ãƒ—ã®èªçŸ¥æ©Ÿèƒ½ã‚¹ã‚¿ãƒƒã‚¯
 * 
 * ã€æ©Ÿèƒ½ã‚¹ã‚¿ãƒƒã‚¯ã£ã¦ä½•ï¼Ÿã€‘
 * 
 * å„MBTIã‚¿ã‚¤ãƒ—ã¯ã€8ã¤ã®æ©Ÿèƒ½ã®ã†ã¡ç‰¹å®šã®4ã¤ã‚’ä½¿ã†ã€‚
 * ã—ã‹ã‚‚ä½¿ã†é †ç•ªï¼ˆå„ªå…ˆé †ä½ï¼‰ãŒæ±ºã¾ã£ã¦ã„ã‚‹ã€‚
 * 
 * ä¾‹: INTJ
 * [Ni, Te, Fi, Se]
 * 1. ä¸»æ©Ÿèƒ½: Niï¼ˆå†…å‘çš„ç›´è¦³ï¼‰â† ä¸€ç•ªå¾—æ„
 * 2. è£œåŠ©æ©Ÿèƒ½: Teï¼ˆå¤–å‘çš„æ€è€ƒï¼‰
 * 3. ç¬¬ä¸‰æ©Ÿèƒ½: Fiï¼ˆå†…å‘çš„æ„Ÿæƒ…ï¼‰
 * 4. åŠ£ç­‰æ©Ÿèƒ½: Seï¼ˆå¤–å‘çš„æ„Ÿè¦šï¼‰â† ä¸€ç•ªè‹¦æ‰‹
 * 
 * ã€ã‚¹ã‚¿ãƒƒã‚¯ã®æ³•å‰‡ï¼ˆGrant-Brownswordãƒ¢ãƒ‡ãƒ«ï¼‰ã€‘
 * 
 * 1. ä¸»æ©Ÿèƒ½ã¨åŠ£ç­‰æ©Ÿèƒ½ã¯å¯¾ç«‹è»¸
 *    - Niï¼ˆå†…å‘ãƒ»ç›´è¦³ï¼‰â‡” Seï¼ˆå¤–å‘ãƒ»æ„Ÿè¦šï¼‰
 *    - å¾—æ„ãªã“ã¨ã®è£è¿”ã—ãŒè‹¦æ‰‹
 * 
 * 2. ä¸»æ©Ÿèƒ½ã¨è£œåŠ©æ©Ÿèƒ½ã¯æ…‹åº¦ãŒé€†
 *    - Niï¼ˆå†…å‘ï¼‰â†’ Teï¼ˆå¤–å‘ï¼‰
 *    - ãƒãƒ©ãƒ³ã‚¹ã‚’å–ã‚‹ãŸã‚
 * 
 * 3. ç¬¬ä¸‰æ©Ÿèƒ½ã¯è£œåŠ©æ©Ÿèƒ½ã¨å¯¾ç«‹è»¸
 *    - Teï¼ˆå¤–å‘ãƒ»æ€è€ƒï¼‰â‡” Fiï¼ˆå†…å‘ãƒ»æ„Ÿæƒ…ï¼‰
 * 
 * ã€ãªãœã“ã®ä¸¦ã³ãªã®ã‹ï¼Ÿã€‘
 * 
 * ã“ã‚Œã‚‚Jungç†è«–ã¨Myers-Briggsã®è¦³å¯Ÿã«åŸºã¥ãã€‚
 * ã€ŒINTJã®äººã¯ã“ã®é †ç•ªã§æ©Ÿèƒ½ã‚’ä½¿ã£ã¦ã‚‹ã€ã¨ã„ã†
 * é•·å¹´ã®è‡¨åºŠè¦³å¯Ÿã®çµæœã§ã™ã€‚
 * 
 * ç§‘å­¦çš„è¨¼æ˜ã¯ãªã„ã‘ã©ã€å¤šãã®äººãŒã€Œå½“ãŸã£ã¦ã‚‹ã€ã¨æ„Ÿã˜ã‚‹ã€‚
 */
export const COGNITIVE_STACKS = {
    INTJ: ['Ni', 'Te', 'Fi', 'Se'],
    INTP: ['Ti', 'Ne', 'Si', 'Fe'],
    ENTJ: ['Te', 'Ni', 'Se', 'Fi'],
    ENTP: ['Ne', 'Ti', 'Fe', 'Si'],
    INFJ: ['Ni', 'Fe', 'Ti', 'Se'],
    INFP: ['Fi', 'Ne', 'Si', 'Te'],
    ENFJ: ['Fe', 'Ni', 'Se', 'Ti'],
    ENFP: ['Ne', 'Fi', 'Te', 'Si'],
    ISTJ: ['Si', 'Te', 'Fi', 'Ne'],
    ISFJ: ['Si', 'Fe', 'Ti', 'Ne'],
    ESTJ: ['Te', 'Si', 'Ne', 'Fi'],
    ESFJ: ['Fe', 'Si', 'Ne', 'Ti'],
    ISTP: ['Ti', 'Se', 'Ni', 'Fe'],
    ISFP: ['Fi', 'Se', 'Ni', 'Te'],
    ESTP: ['Se', 'Ti', 'Fe', 'Ni'],
    ESFP: ['Se', 'Fi', 'Te', 'Ni']
};

/**
 * MBTIã‚¿ã‚¤ãƒ—ã®èª¬æ˜
 * 
 * ã€é€šç§°ã¨ç°¡å˜ãªç‰¹å¾´ã€‘
 * 
 * å„ã‚¿ã‚¤ãƒ—ã«ã¯ã€Œã‚ã åã€ã¿ãŸã„ãªã‚‚ã®ãŒã‚ã‚Šã¾ã™ã€‚
 * ã“ã‚Œã¯16Personalitiesï¼ˆäººæ°—ã®è¨ºæ–­ã‚µã‚¤ãƒˆï¼‰ãªã©ã§
 * ä½¿ã‚ã‚Œã¦ã„ã‚‹å‘¼ã³æ–¹ã§ã™ã€‚
 * 
 * ã‚ãã¾ã§ã€Œã‚¤ãƒ¡ãƒ¼ã‚¸ã€ãªã®ã§ã€
 * ã€ŒINTJã ã‹ã‚‰çµ¶å¯¾å»ºç¯‰å®¶ã¿ãŸã„ãªæ€§æ ¼ã€ã£ã¦ã‚ã‘ã˜ã‚ƒãªã„ã§ã™ã€‚
 */
export const mbtiDescriptions = {
    INTJ: { name: "å»ºç¯‰å®¶", description: "æˆ¦ç•¥çš„æ€è€ƒã¨é©æ–°çš„ãªæ´å¯ŸåŠ›ã‚’æŒã¤å®Œç’§ä¸»ç¾©è€…ã€‚" },
    INTP: { name: "è«–ç†å­¦è€…", description: "çŸ¥çš„å¥½å¥‡å¿ƒã«æº€ã¡ãŸæ€è€ƒå®¶ã€‚" },
    ENTJ: { name: "æŒ‡æ®å®˜", description: "æ˜ç¢ºãªãƒ“ã‚¸ãƒ§ãƒ³ã‚’æŒã¡çµ„ç¹”ã‚’å°ããƒªãƒ¼ãƒ€ãƒ¼ã€‚" },
    ENTP: { name: "è¨è«–è€…", description: "å‰µé€ çš„ãªç™ºæƒ³ã§æ–°ã—ã„å¯èƒ½æ€§ã‚’è¿½æ±‚ã™ã‚‹é©æ–°è€…ã€‚" },
    INFJ: { name: "æå”±è€…", description: "ç†æƒ³ä¸»ç¾©ã§æ·±ã„æ´å¯Ÿã‚’æŒã¤ãƒ“ã‚¸ãƒ§ãƒŠãƒªãƒ¼ã€‚" },
    INFP: { name: "ä»²ä»‹è€…", description: "èª å®Ÿã§æƒ…ç†±çš„ãªç†æƒ³ä¸»ç¾©è€…ã€‚" },
    ENFJ: { name: "ä¸»äººå…¬", description: "äººã€…ã‚’é¼“èˆã—å°ãã‚«ãƒªã‚¹ãƒçš„ãƒªãƒ¼ãƒ€ãƒ¼ã€‚" },
    ENFP: { name: "é‹å‹•å®¶", description: "è‡ªç”±ã§å‰µé€ çš„ã€ç†±æ„ã‚ãµã‚Œã‚‹æ¢æ±‚è€…ã€‚" },
    ISTJ: { name: "ç®¡ç†è€…", description: "è²¬ä»»æ„ŸãŒå¼·ãä¿¡é ¼ã§ãã‚‹å®Ÿå‹™å®¶ã€‚" },
    ISFJ: { name: "æ“è­·è€…", description: "æ¸©ã‹ãçŒ®èº«çš„ãªä¿è­·è€…ã€‚" },
    ESTJ: { name: "å¹¹éƒ¨", description: "çµ„ç¹”åŒ–ã¨åŠ¹ç‡ã‚’é‡ã‚“ã˜ã‚‹å®Ÿè·µçš„ãƒªãƒ¼ãƒ€ãƒ¼ã€‚" },
    ESFJ: { name: "é ˜äº‹å®˜", description: "ç¤¾äº¤çš„ã§æ€ã„ã‚„ã‚Šã®ã‚ã‚‹ä¸–è©±å½¹ã€‚" },
    ISTP: { name: "å·¨åŒ ", description: "ç¾å®Ÿçš„ã§å³å¿œåŠ›ã®ã‚ã‚‹å•é¡Œè§£æ±ºè€…ã€‚" },
    ISFP: { name: "å†’é™ºå®¶", description: "æŸ”è»Ÿã§èŠ¸è¡“çš„ãªæ¢æ±‚è€…ã€‚" },
    ESTP: { name: "èµ·æ¥­å®¶", description: "å¤§èƒ†ã§è¡Œå‹•çš„ãªå®Ÿè·µå®¶ã€‚" },
    ESFP: { name: "ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ†ã‚¤ãƒŠãƒ¼", description: "é™½æ°—ã§ç¤¾äº¤çš„ãªãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ¼ã€‚" }
};

// ============================================
// å…¥åŠ›æ¤œè¨¼ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
// ============================================

/**
 * Likertå°ºåº¦å€¤ã®æ¤œè¨¼
 * 
 * ã€ä½•ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ã‚‹ï¼Ÿã€‘
 * 
 * ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å›ç­”ãŒ
 * 1ã€œ5ã®æ•´æ•°ã‹ã©ã†ã‹ã‚’ãƒã‚§ãƒƒã‚¯ã€‚
 * 
 * ä¾‹:
 * - isValidLikertValue(3) â†’ trueï¼ˆOKï¼‰
 * - isValidLikertValue(5.5) â†’ falseï¼ˆå°æ•°ã¯ãƒ€ãƒ¡ï¼‰
 * - isValidLikertValue(0) â†’ falseï¼ˆç¯„å›²å¤–ï¼‰
 * - isValidLikertValue("3") â†’ falseï¼ˆæ–‡å­—åˆ—ã¯ãƒ€ãƒ¡ï¼‰
 * 
 * ã€ãªãœå¿…è¦ï¼Ÿã€‘
 * 
 * ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®ãƒã‚°ã‚„ã€ä¸æ­£ãªå…¥åŠ›ï¼ˆãƒãƒƒã‚­ãƒ³ã‚°ãªã©ï¼‰ã§
 * ãŠã‹ã—ãªå€¤ãŒæ¥ãŸã¨ãã«ã€è¨ˆç®—ãŒå£Šã‚Œã‚‹ã®ã‚’é˜²ãã€‚
 * 
 * ã€Œé˜²å¾¡çš„ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã€ã¨å‘¼ã°ã‚Œã‚‹æ‰‹æ³•ã§ã™ã€‚
 */
function isValidLikertValue(value) {
    return Number.isInteger(value) && value >= 1 && value <= 5;
}

/**
 * èªçŸ¥æ©Ÿèƒ½ã‚¿ã‚¤ãƒ—ã®æ¤œè¨¼
 * 
 * ã€ä½•ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ã‚‹ï¼Ÿã€‘
 * 
 * å¼•æ•°ã§æ¸¡ã•ã‚ŒãŸæ©Ÿèƒ½åï¼ˆä¾‹: "Ni"ï¼‰ãŒã€
 * æœ¬å½“ã«å­˜åœ¨ã™ã‚‹èªçŸ¥æ©Ÿèƒ½ã‹ã©ã†ã‹ã€‚
 * 
 * ä¾‹:
 * - isValidFunctionType("Ni") â†’ trueï¼ˆå­˜åœ¨ã™ã‚‹ï¼‰
 * - isValidFunctionType("Nx") â†’ falseï¼ˆå­˜åœ¨ã—ãªã„ï¼‰
 * 
 * ã€ãªãœå¿…è¦ï¼Ÿã€‘
 * 
 * ã‚¿ã‚¤ãƒï¼ˆå…¥åŠ›ãƒŸã‚¹ï¼‰ã‚„ã€å°†æ¥ã®ã‚³ãƒ¼ãƒ‰å¤‰æ›´ã§
 * å­˜åœ¨ã—ãªã„æ©Ÿèƒ½åã‚’ä½¿ã£ã¦ã—ã¾ã†ã®ã‚’é˜²ãã€‚
 */
function isValidFunctionType(funcType) {
    return funcType in FUNCTIONS;
}

// ============================================
// ã‚¹ã‚³ã‚¢è¨ˆç®—
// ============================================

/**
 * å˜ä¸€å›ç­”ã®ã‚¹ã‚³ã‚¢è¨ˆç®—ï¼ˆéç·šå½¢é‡ã¿ä»˜ã‘ + é€†è»¢é …ç›®å¯¾å¿œï¼‰
 * 
 * ã€ã“ã®é–¢æ•°ã¯ä½•ã‚’ã—ã¦ã‚‹ï¼Ÿã€‘
 * 
 * ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒ1ã¤ã®è³ªå•ã«ç­”ãˆãŸã¨ãï¼ˆ1ã€œ5ï¼‰ã€
 * ãã®å›ç­”ã‚’ã€Œã‚¹ã‚³ã‚¢ã€ã«å¤‰æ›ã—ã¾ã™ã€‚
 * 
 * ã€å‡¦ç†ã®æµã‚Œï¼ˆ5ã‚¹ãƒ†ãƒƒãƒ—ï¼‰ã€‘
 * 
 * 1. å…¥åŠ›ãƒã‚§ãƒƒã‚¯
 *    - 1ã€œ5ã®æ•´æ•°ã˜ã‚ƒãªã‹ã£ãŸã‚‰0ã‚’è¿”ã™ï¼ˆã‚¨ãƒ©ãƒ¼é˜²æ­¢ï¼‰
 * 
 * 2. é€†è»¢é …ç›®ã®å‡¦ç†
 *    - isReverse = true ãªã‚‰ã€å€¤ã‚’åè»¢
 *    - ä¾‹: 5 â†’ 1ã€4 â†’ 2ã€3 â†’ 3ã€2 â†’ 4ã€1 â†’ 5
 *    - è¨ˆç®—å¼: 6 - å…ƒã®å€¤
 * 
 * 3. ä¸­å¤®å€¤ã‹ã‚‰ã®åå·®ã‚’è¨ˆç®—
 *    - ä¸­å¤®å€¤ï¼ˆ3ï¼‰ã‚’å¼•ã
 *    - ä¾‹: 5 â†’ +2ã€4 â†’ +1ã€3 â†’ 0ã€2 â†’ -1ã€1 â†’ -2
 * 
 * 4. éç·šå½¢å¼·èª¿ã‚’é©ç”¨
 *    - åå·®ã«æŒ‡æ•°1.2ã‚’ã‹ã‘ã‚‹
 *    - ãŸã ã—ç¬¦å·ï¼ˆ+ or -ï¼‰ã¯ä¿æŒ
 *    - ä¾‹: +2 â†’ +2.30ã€+1 â†’ +1.00ã€-2 â†’ -2.30
 * 
 * 5. ã‚¹ã‚³ã‚¢ã‚’è¿”ã™
 *    - ç´„ -2.3 ï½ +2.3 ã®ç¯„å›²
 * 
 * ã€å…·ä½“ä¾‹ã€‘
 * 
 * è³ªå•: ã€Œã‚ãªãŸã¯è«–ç†çš„ã«è€ƒãˆã¾ã™ã‹ï¼Ÿã€
 * å›ç­”: 5ï¼ˆã¨ã¦ã‚‚ãã†æ€ã†ï¼‰
 * isReverse: falseï¼ˆæ™®é€šã®è³ªå•ï¼‰
 * 
 * è¨ˆç®—:
 * - actualValue = 5ï¼ˆåè»¢ãªã—ï¼‰
 * - deviation = 5 - 3 = +2
 * - emphasizedScore = 2^1.2 = 2.30
 * - è¿”ã‚Šå€¤: +2.30
 * 
 * ã€é€†è»¢é …ç›®ã®ä¾‹ã€‘
 * 
 * è³ªå•: ã€Œã‚ãªãŸã¯æ„Ÿæƒ…ã§æ±ºã‚ã¾ã™ã‹ï¼Ÿã€ï¼ˆè«–ç†æ€è€ƒã®é€†ï¼‰
 * å›ç­”: 5ï¼ˆã¨ã¦ã‚‚ãã†æ€ã†ï¼‰â† æ„Ÿæƒ…çš„
 * isReverse: trueï¼ˆé€†è»¢é …ç›®ï¼‰
 * 
 * è¨ˆç®—:
 * - actualValue = 6 - 5 = 1ï¼ˆåè»¢ï¼ï¼‰
 * - deviation = 1 - 3 = -2
 * - emphasizedScore = -2^1.2 = -2.30
 * - è¿”ã‚Šå€¤: -2.30ï¼ˆè«–ç†æ€è€ƒã®ã‚¹ã‚³ã‚¢ãŒä¸‹ãŒã‚‹ï¼‰
 * 
 * @param {number} value - ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å›ç­”ï¼ˆ1ã€œ5ï¼‰
 * @param {boolean} isReverse - é€†è»¢é …ç›®ã‹ã©ã†ã‹ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: falseï¼‰
 * @returns {number} è¨ˆç®—ã•ã‚ŒãŸã‚¹ã‚³ã‚¢ï¼ˆç´„ -2.3 ï½ +2.3ï¼‰
 */
export function calculateScore(value, isReverse = false) {
    
    // ã‚¹ãƒ†ãƒƒãƒ—1: å…¥åŠ›æ¤œè¨¼
    if (!isValidLikertValue(value)) {
        console.error(`[calculateScore] ä¸æ­£ãªå€¤: ${value}ã€‚1ã€œ5ã®æ•´æ•°ãŒå¿…è¦ã§ã™ã€‚0ã‚’è¿”ã—ã¾ã™ã€‚`);
        return 0;
    }
    
    // ã‚¹ãƒ†ãƒƒãƒ—2: é€†è»¢é …ç›®ã®å‡¦ç†
    // é€†è»¢é …ç›®ãªã‚‰ã€5â†’1ã€4â†’2ã®ã‚ˆã†ã«åè»¢
    const actualValue = isReverse 
        ? (LIKERT_SCALE_REVERSE_BASE - value)  // 6 - value
        : value;
    
    // ã‚¹ãƒ†ãƒƒãƒ—3: ä¸­å¤®å€¤ï¼ˆ3ï¼‰ã‹ã‚‰ã®åå·®ã‚’è¨ˆç®—
    // çµæœ: -2, -1, 0, +1, +2 ã®ã©ã‚Œã‹
    const deviation = actualValue - LIKERT_SCALE_MIDPOINT;
    
    // ã‚¹ãƒ†ãƒƒãƒ—4: éç·šå½¢å¼·èª¿ã‚’é©ç”¨
    // Math.sign(deviation): ç¬¦å·ã‚’å–å¾—ï¼ˆ-1, 0, +1ï¼‰
    // Math.abs(deviation): çµ¶å¯¾å€¤ã‚’å–å¾—ï¼ˆ0, 1, 2ï¼‰
    // Math.pow(..., 1.2): æŒ‡æ•°1.2ã‚’ã‹ã‘ã‚‹
    // æœ€å¾Œã«ç¬¦å·ã‚’æˆ»ã™
    const emphasizedScore = Math.sign(deviation) * 
                           Math.pow(Math.abs(deviation), SCORE_EMPHASIS_EXPONENT);
    
    // ã‚¹ãƒ†ãƒƒãƒ—5: çµæœã‚’è¿”ã™
    return emphasizedScore;
}

/**
 * ã‚¹ã‚³ã‚¢ã®æ­£è¦åŒ–ï¼ˆç”Ÿã‚¹ã‚³ã‚¢ â†’ 0-100ãƒ‘ãƒ¼ã‚»ãƒ³ã‚¿ã‚¤ãƒ«ï¼‰
 * 
 * ã€ã“ã®é–¢æ•°ã¯ä½•ã‚’ã—ã¦ã‚‹ï¼Ÿã€‘
 * 
 * è¨ˆç®—ã•ã‚ŒãŸç”Ÿã‚¹ã‚³ã‚¢ï¼ˆä¾‹: +15.2, -8.7ï¼‰ã‚’ã€
 * 0ã€œ100%ã®ã‚ã‹ã‚Šã‚„ã™ã„æ•°å€¤ã«å¤‰æ›ã—ã¾ã™ã€‚
 * 
 * ã€ãªãœæ­£è¦åŒ–ãŒå¿…è¦ï¼Ÿã€‘
 * 
 * ç”Ÿã‚¹ã‚³ã‚¢ï¼ˆ-20ã€œ+20ï¼‰ã ã¨:
 * - ã€Œ15.2ã£ã¦å¤šã„ã®ï¼Ÿå°‘ãªã„ã®ï¼Ÿã€â† ã‚ã‹ã‚Šã«ãã„
 * - è³ªå•æ•°ãŒå¤‰ã‚ã‚‹ã¨æ¯”è¼ƒã§ããªã„
 * 
 * 0ã€œ100%ãªã‚‰:
 * - ã€Œ88%ã€â† ç›´æ„Ÿçš„ã«ã‚ã‹ã‚‹ï¼
 * - ã©ã‚“ãªè³ªå•æ•°ã§ã‚‚æ¯”è¼ƒã§ãã‚‹
 * 
 * ã€å¤‰æ›ã®ä»•çµ„ã¿ã€‘
 * 
 * 1. æœ€å°å€¤ï¼ˆ-20ï¼‰ã‚’0ã«ã‚·ãƒ•ãƒˆ
 *    - ä¾‹: -20 â†’ 0ã€0 â†’ 20ã€+20 â†’ 40
 * 
 * 2. 0ã€œ40ã‚’0ã€œ100ã«æ‹¡å¤§
 *    - ä¾‹: 0 â†’ 0%ã€20 â†’ 50%ã€40 â†’ 100%
 * 
 * è¨ˆç®—å¼:
 * normalized = ((ç”Ÿã‚¹ã‚³ã‚¢ - æœ€å°å€¤) / ç¯„å›²) Ã— 100
 * 
 * ã€å…·ä½“ä¾‹ã€‘
 * 
 * ç”Ÿã‚¹ã‚³ã‚¢ -20:
 * - ((âˆ’20 âˆ’ (âˆ’20)) / 40) Ã— 100 = (0 / 40) Ã— 100 = 0%
 * 
 * ç”Ÿã‚¹ã‚³ã‚¢ 0:
 * - ((0 âˆ’ (âˆ’20)) / 40) Ã— 100 = (20 / 40) Ã— 100 = 50%
 * 
 * ç”Ÿã‚¹ã‚³ã‚¢ +20:
 * - ((20 âˆ’ (âˆ’20)) / 40) Ã— 100 = (40 / 40) Ã— 100 = 100%
 * 
 * ã€ç¯„å›²å¤–ã®å€¤ã¯ã©ã†ãªã‚‹ï¼Ÿã€‘
 * 
 * ç†è«–çš„ã«ã¯-20ã€œ+20ã ã‘ã©ã€æ¥µç«¯ãªå›ç­”ã§è¶…ãˆã‚‹ã“ã¨ã‚‚ã‚ã‚‹ã€‚
 * ãã®å ´åˆã¯0%ã¾ãŸã¯100%ã«ã‚¯ãƒ©ãƒ³ãƒ—ï¼ˆåˆ¶é™ï¼‰ã—ã¾ã™ã€‚
 * 
 * ä¾‹:
 * - ç”Ÿã‚¹ã‚³ã‚¢ -25 â†’ 0%ï¼ˆä¸‹é™ï¼‰
 * - ç”Ÿã‚¹ã‚³ã‚¢ +25 â†’ 100%ï¼ˆä¸Šé™ï¼‰
 * 
 * ã€å°æ•°ç‚¹ã®æ‰±ã„ã€‘
 * 
 * è¨ˆç®—çµæœã¯å°æ•°ã«ãªã‚‹ã‘ã©ã€å››æ¨äº”å…¥ã—ã¦æ•´æ•°ã«ã—ã¾ã™ã€‚
 * ä¾‹: 88.7% â†’ 89%
 * 
 * @param {number} rawScore - ç”Ÿã‚¹ã‚³ã‚¢ï¼ˆç†è«–çš„ã« -20 ï½ +20ï¼‰
 * @returns {number} æ­£è¦åŒ–ã•ã‚ŒãŸã‚¹ã‚³ã‚¢ï¼ˆ0ã€œ100ï¼‰
 */
function normalizeScore(rawScore) {
    const { MIN, MAX, OUTPUT_MIN, OUTPUT_MAX } = SCORE_NORMALIZATION;
    
    // ç·šå½¢å¤‰æ›: [MIN, MAX] â†’ [OUTPUT_MIN, OUTPUT_MAX]
    // ã¤ã¾ã‚Š: [-20, 20] â†’ [0, 100]
    const normalized = ((rawScore - MIN) / (MAX - MIN)) * (OUTPUT_MAX - OUTPUT_MIN) + OUTPUT_MIN;
    
    // ç¯„å›²åˆ¶é™ï¼ˆ0ã€œ100ï¼‰+ å››æ¨äº”å…¥
    return Math.round(
        Math.max(OUTPUT_MIN, Math.min(OUTPUT_MAX, normalized))
    );
}

// ============================================
// MBTIã‚¿ã‚¤ãƒ—åˆ¤å®š
// ============================================

/**
 * MBTIã‚¿ã‚¤ãƒ—ã®åˆ¤å®šï¼ˆèªçŸ¥æ©Ÿèƒ½ã‚¹ã‚¿ãƒƒã‚¯ãƒ™ãƒ¼ã‚¹ï¼‰
 * 
 * ã€ã“ã®é–¢æ•°ã¯ä½•ã‚’ã—ã¦ã‚‹ï¼Ÿã€‘
 * 
 * 8ã¤ã®èªçŸ¥æ©Ÿèƒ½ã®ã‚¹ã‚³ã‚¢ã‹ã‚‰ã€
 * 16ã®MBTIã‚¿ã‚¤ãƒ—ã®ã†ã¡ã€Œæœ€ã‚‚å½“ã¦ã¯ã¾ã‚‹ã‚¿ã‚¤ãƒ—ã€ã‚’åˆ¤å®šã—ã¾ã™ã€‚
 * 
 * ã€åˆ¤å®šã®ä»•çµ„ã¿ï¼ˆ4ã‚¹ãƒ†ãƒƒãƒ—ï¼‰ã€‘
 * 
 * 1. 16ã‚¿ã‚¤ãƒ—ãã‚Œãã‚Œã«ã¤ã„ã¦ã€Œé©åˆåº¦ã€ã‚’è¨ˆç®—
 *    - å„ã‚¿ã‚¤ãƒ—ã«ã¯ã€Œä½¿ã†æ©Ÿèƒ½ã€ãŒ4ã¤ã‚ã‚‹ï¼ˆã‚¹ã‚¿ãƒƒã‚¯ï¼‰
 *    - ãã®4ã¤ã®ã‚¹ã‚³ã‚¢ã‚’ã€é‡ã¿ä»˜ã‘ã—ã¦åˆè¨ˆ
 * 
 * 2. é©åˆåº¦ãŒæœ€ã‚‚é«˜ã„ã‚¿ã‚¤ãƒ—ã‚’é¸ã¶
 *    - ä¾‹: INTJ 85ç‚¹ã€INTP 45ç‚¹ã€... â†’ INTJã‚’é¸æŠ
 * 
 * 3. 1ä½ã¨2ä½ã®å·®ã‹ã‚‰ã€Œç¢ºä¿¡åº¦ã€ã‚’è¨ˆç®—
 *    - å·®ãŒå¤§ãã„ â†’ ç¢ºä¿¡åº¦ é«˜ã„ï¼ˆã“ã®ã‚¿ã‚¤ãƒ—ã§é–“é•ã„ãªã„ï¼‰
 *    - å·®ãŒå°ã•ã„ â†’ ç¢ºä¿¡åº¦ ä½ã„ï¼ˆè¤‡æ•°ã‚¿ã‚¤ãƒ—ã®å¯èƒ½æ€§ï¼‰
 * 
 * 4. çµæœã‚’è¿”ã™
 *    - åˆ¤å®šã‚¿ã‚¤ãƒ—ã€ç¢ºä¿¡åº¦ã€ä¸Šä½2ã‚¿ã‚¤ãƒ—ã€å…¨ã‚¿ã‚¤ãƒ—ã®ã‚¹ã‚³ã‚¢
 * 
 * ã€å…·ä½“ä¾‹ã€‘
 * 
 * ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ©Ÿèƒ½ã‚¹ã‚³ã‚¢ï¼ˆç”Ÿã‚¹ã‚³ã‚¢ï¼‰:
 * {
 *   Ni: +15.2,  â† é«˜ã„
 *   Ne: -3.4,
 *   Si: +2.1,
 *   Se: -8.7,   â† ä½ã„
 *   Ti: +10.3,
 *   Te: +12.5,  â† é«˜ã„
 *   Fi: -5.6,
 *   Fe: +1.8
 * }
 * 
 * INTJã®é©åˆåº¦ã‚’è¨ˆç®—:
 * - ã‚¹ã‚¿ãƒƒã‚¯: [Ni, Te, Fi, Se]
 * - ä¸»æ©Ÿèƒ½ Ni: +15.2 Ã— 4.0 = +60.8
 * - è£œåŠ©æ©Ÿèƒ½ Te: +12.5 Ã— 2.0 = +25.0
 * - ç¬¬ä¸‰æ©Ÿèƒ½ Fi: -5.6 Ã— 1.0 = -5.6
 * - åŠ£ç­‰æ©Ÿèƒ½ Se: -8.7 Ã— 0.5 = -4.35
 * - åˆè¨ˆ: 60.8 + 25.0 - 5.6 - 4.35 = 75.85ç‚¹
 * 
 * ï¼ˆä»–ã®15ã‚¿ã‚¤ãƒ—ã‚‚åŒæ§˜ã«è¨ˆç®—ï¼‰
 * 
 * çµæœ:
 * - 1ä½ INTJ: 75.85ç‚¹
 * - 2ä½ INTP: 45.20ç‚¹
 * - å·®: 30.65ç‚¹
 * 
 * ç¢ºä¿¡åº¦:
 * - 100 Ã— (75.85 - 45.20) / (75.85 + 45.20)
 * - = 100 Ã— 30.65 / 121.05
 * - = 25.3% â†’ 25%
 * 
 * ã€ãªãœé‡ã¿ä»˜ã‘ã™ã‚‹ã®ï¼Ÿã€‘
 * 
 * ä¸»æ©Ÿèƒ½ï¼ˆä¸€ç•ªä½¿ã†ï¼‰ã®ã‚¹ã‚³ã‚¢ãŒé«˜ã„ã“ã¨ãŒã€
 * ãã®ã‚¿ã‚¤ãƒ—ã§ã‚ã‚‹ã€Œæœ€å¤§ã®è¨¼æ‹ ã€ã ã‹ã‚‰ã€‚
 * 
 * ã‚‚ã—å…¨éƒ¨åŒã˜é‡ã¿ï¼ˆ1.0ï¼‰ã ã¨:
 * - åŠ£ç­‰æ©Ÿèƒ½ï¼ˆè‹¦æ‰‹ãªã“ã¨ï¼‰ã®ã‚¹ã‚³ã‚¢ã‚‚åŒã˜å½±éŸ¿åŠ›
 * - ã€Œä½•ãŒè‹¦æ‰‹ã‹ã€ã§æ€§æ ¼ãŒæ±ºã¾ã£ã¡ã‚ƒã†ï¼ˆãŠã‹ã—ã„ï¼‰
 * 
 * é‡ã¿ä»˜ã‘ï¼ˆ4:2:1:0.5ï¼‰ã«ã‚ˆã‚Š:
 * - ä¸»æ©Ÿèƒ½ã¨è£œåŠ©æ©Ÿèƒ½ã§ç´„75%æ±ºã¾ã‚‹
 * - ã“ã‚Œã¯å®Ÿéš›ã®æ€§æ ¼ç‰¹æ€§ã¨ä¸€è‡´ã™ã‚‹
 * 
 * ã€ç¢ºä¿¡åº¦ã®è§£é‡ˆã€‘
 * 
 * - 0ã€œ30%: è¤‡æ•°ã‚¿ã‚¤ãƒ—ã®ç‰¹æ€§ã‚’æŒã¤
 *   â†’ ã€ŒINTJã¨INTPã®ä¸­é–“ã€ã¿ãŸã„ãªäºº
 *   â†’ æ¬¡ç‚¹ã‚¿ã‚¤ãƒ—ã‚‚è¡¨ç¤ºã™ã¹ã
 * 
 * - 31ã€œ60%: æ¨™æº–çš„ãªè¨ºæ–­
 *   â†’ ã»ã¨ã‚“ã©ã®äººã¯ã“ã“
 *   â†’ ã€Œã‚ãªãŸã¯INTJã§ã™ã€ã§OK
 * 
 * - 61ã€œ100%: éå¸¸ã«æ˜ç¢ºãªã‚¿ã‚¤ãƒ—
 *   â†’ ã€Œå…¸å‹çš„ãªINTJã€
 *   â†’ ç‰¹å¾´ãŒã¯ã£ãã‚Šã—ã¦ã„ã‚‹
 * 
 * @param {Object} functionScores - å„èªçŸ¥æ©Ÿèƒ½ã®ç”Ÿã‚¹ã‚³ã‚¢
 *   ä¾‹: { Ni: 15.2, Ne: -3.4, Si: 2.1, Se: -8.7, Ti: 10.3, Te: 12.5, Fi: -5.6, Fe: 1.8 }
 * @param {Object} COGNITIVE_STACKS - ã‚¿ã‚¤ãƒ—ã”ã¨ã®æ©Ÿèƒ½ã‚¹ã‚¿ãƒƒã‚¯å®šç¾©
 * @returns {Object} åˆ¤å®šçµæœ
 *   {
 *     type: "INTJ",           // æœ€ã‚‚é©åˆã™ã‚‹ã‚¿ã‚¤ãƒ—
 *     confidence: 25,          // ç¢ºä¿¡åº¦ï¼ˆ0ã€œ100%ï¼‰
 *     top2: ["INTJ", "INTP"], // ä¸Šä½2ã‚¿ã‚¤ãƒ—
 *     typeScores: { ... }      // å…¨16ã‚¿ã‚¤ãƒ—ã®ã‚¹ã‚³ã‚¢ï¼ˆãƒ‡ãƒãƒƒã‚°ç”¨ï¼‰
 *   }
 */
export function determineMBTIType(functionScores, COGNITIVE_STACKS) {
    
    // ã‚¹ãƒ†ãƒƒãƒ—0: å…¥åŠ›æ¤œè¨¼
    // functionScoresãŒã¡ã‚ƒã‚“ã¨ã—ãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‹ç¢ºèª
    if (!functionScores || typeof functionScores !== 'object') {
        console.error('[determineMBTIType] functionScoresãŒä¸æ­£ã§ã™');
        return {
            type: 'UNKNOWN',
            confidence: 0,
            top2: ['UNKNOWN', 'UNKNOWN'],
            typeScores: {}
        };
    }
    
    // ã‚¹ãƒ†ãƒƒãƒ—1: å„ã‚¿ã‚¤ãƒ—ã®é©åˆåº¦ã‚’è¨ˆç®—
    const typeScores = {};  // çµæœã‚’ä¿å­˜ã™ã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
    
    // Jungæ©Ÿèƒ½ã‚¹ã‚¿ãƒƒã‚¯ã®é‡ã¿é…åˆ—
    // ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹0ã€œ3ãŒã€ä¸»æ©Ÿèƒ½ã€œåŠ£ç­‰æ©Ÿèƒ½ã«å¯¾å¿œ
    const stackWeights = [
        JUNG_FUNCTION_WEIGHTS.DOMINANT,   // ä½ç½®0: ä¸»æ©Ÿèƒ½ = 4.0
        JUNG_FUNCTION_WEIGHTS.AUXILIARY,  // ä½ç½®1: è£œåŠ©æ©Ÿèƒ½ = 2.0
        JUNG_FUNCTION_WEIGHTS.TERTIARY,   // ä½ç½®2: ç¬¬ä¸‰æ©Ÿèƒ½ = 1.0
        JUNG_FUNCTION_WEIGHTS.INFERIOR    // ä½ç½®3: åŠ£ç­‰æ©Ÿèƒ½ = 0.5
    ];
    
    // 16ã‚¿ã‚¤ãƒ—å…¨ã¦ã«ã¤ã„ã¦ãƒ«ãƒ¼ãƒ—
    for (const [typeName, functionStack] of Object.entries(COGNITIVE_STACKS)) {
        let totalScore = 0;  // ã“ã®ã‚¿ã‚¤ãƒ—ã®åˆè¨ˆã‚¹ã‚³ã‚¢
        
        // ã‚¹ã‚¿ãƒƒã‚¯å†…ã®4æ©Ÿèƒ½ã«ã¤ã„ã¦é‡ã¿ä»˜ãåˆè¨ˆã‚’è¨ˆç®—
        // position: 0ï¼ˆä¸»ï¼‰, 1ï¼ˆè£œåŠ©ï¼‰, 2ï¼ˆç¬¬ä¸‰ï¼‰, 3ï¼ˆåŠ£ç­‰ï¼‰
        for (let position = 0; position < functionStack.length; position++) {
            const funcName = functionStack[position];     // ä¾‹: "Ni"
            const funcScore = functionScores[funcName] || 0;  // ç”Ÿã‚¹ã‚³ã‚¢ ä¾‹: 15.2
            const weight = stackWeights[position];        // é‡ã¿ ä¾‹: 4.0
            
            totalScore += funcScore * weight;  // ä¾‹: 15.2 Ã— 4.0 = 60.8
        }
        
        // ã“ã®ã‚¿ã‚¤ãƒ—ã®ã‚¹ã‚³ã‚¢ã‚’ä¿å­˜
        typeScores[typeName] = totalScore;
    }
    
    // ã‚¹ãƒ†ãƒƒãƒ—2: ã‚¹ã‚³ã‚¢ã‚’é™é †ã«ã‚½ãƒ¼ãƒˆ
    // [["INTJ", 75.85], ["INTP", 45.20], ...] ã®ã‚ˆã†ãªé…åˆ—ã«ãªã‚‹
    const sortedTypes = Object.entries(typeScores)
        .sort((a, b) => b[1] - a[1]);  // b[1] - a[1] ã§é™é †
    
    // ã‚¹ãƒ†ãƒƒãƒ—3: ä¸Šä½2ã‚¿ã‚¤ãƒ—ã‚’å–å¾—
    const [firstType, firstScore] = sortedTypes[0];           // 1ä½
    const [secondType, secondScore] = sortedTypes[1] || [null, 0];  // 2ä½ï¼ˆãªã‘ã‚Œã°nullï¼‰
    
    // ã‚¹ãƒ†ãƒƒãƒ—4: ç¢ºä¿¡åº¦ã‚’è¨ˆç®—
    // å¼: 100 Ã— (1ä½ - 2ä½) / (|1ä½| + |2ä½|)
    const scoreDifference = firstScore - secondScore;  // ã‚¹ã‚³ã‚¢ã®å·®
    const scoreSum = Math.abs(firstScore) + Math.abs(secondScore) + CONFIDENCE_CALCULATION_EPSILON;  // åˆè¨ˆï¼ˆã‚¼ãƒ­é™¤ç®—é˜²æ­¢ï¼‰
    const rawConfidence = 100 * (scoreDifference / scoreSum);
    
    // ç¢ºä¿¡åº¦ã‚’0ã€œ100ã®ç¯„å›²ã«åˆ¶é™ + å››æ¨äº”å…¥
    const confidence = Math.max(
        CONFIDENCE_BOUNDS.MIN,
        Math.min(CONFIDENCE_BOUNDS.MAX, Math.round(rawConfidence))
    );
    
    // ã‚¹ãƒ†ãƒƒãƒ—5: çµæœã‚’è¿”ã™
    return {
        type: firstType,           // åˆ¤å®šã‚¿ã‚¤ãƒ—ï¼ˆä¾‹: "INTJ"ï¼‰
        confidence: confidence,     // ç¢ºä¿¡åº¦ï¼ˆä¾‹: 25ï¼‰
        top2: [firstType, secondType],  // ä¸Šä½2ã‚¿ã‚¤ãƒ—
        typeScores: typeScores      // å…¨ã‚¿ã‚¤ãƒ—ã®ã‚¹ã‚³ã‚¢ï¼ˆãƒ‡ãƒãƒƒã‚°ç”¨ï¼‰
    };
}

// ============================================
// ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ: å®šæ•°ã‚‚å¤–éƒ¨ã‹ã‚‰å‚ç…§å¯èƒ½ã«
// ============================================

/**
 * è¨­å®šå®šæ•°ã®ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
 * 
 * ã€ãªãœã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã™ã‚‹ã®ï¼Ÿã€‘
 * 
 * 1. ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã§ä½¿ã†
 *    - ã€ŒæŒ‡æ•°1.2ã‚’ä½¿ã£ãŸã¨ãã€æœŸå¾…å€¤ã¯XXã€ã¿ãŸã„ãªãƒ†ã‚¹ãƒˆãŒæ›¸ã‘ã‚‹
 * 
 * 2. UIå´ã§è¡¨ç¤ºã™ã‚‹
 *    - ã€Œã“ã®è¨ºæ–­ã¯æŒ‡æ•°1.2ã‚’ä½¿ã£ã¦ã„ã¾ã™ã€ã¨è¡¨ç¤ºã§ãã‚‹
 * 
 * 3. ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆè‡ªå‹•ç”Ÿæˆ
 *    - ã“ã®å®šæ•°ã‚’èª­ã¿å–ã£ã¦ã€èª¬æ˜ãƒšãƒ¼ã‚¸ã‚’ä½œã‚Œã‚‹
 */
export const CONFIG = {
    JUNG_FUNCTION_WEIGHTS,
    SCORE_EMPHASIS_EXPONENT,
    SCORE_NORMALIZATION,
    LIKERT_SCALE_MIDPOINT,
    LIKERT_SCALE_REVERSE_BASE,
    CONFIDENCE_CALCULATION_EPSILON,
    CONFIDENCE_BOUNDS
};

/**
 * æ­£è¦åŒ–ã•ã‚ŒãŸã‚¹ã‚³ã‚¢ã‚’å–å¾—ï¼ˆUIè¡¨ç¤ºç”¨ï¼‰
 * 
 * ã€ã“ã®é–¢æ•°ã¯ä½•ã®ãŸã‚ï¼Ÿã€‘
 * 
 * UIå´ï¼ˆapp.jsï¼‰ã‹ã‚‰ã€æ­£è¦åŒ–é–¢æ•°ã‚’å‘¼ã³å‡ºã›ã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚
 * 
 * ä¾‹:
 * import { getNormalizedScore } from './core.js';
 * const displayScore = getNormalizedScore(15.2);  // â†’ 88
 * 
 * @param {number} rawScore - ç”Ÿã‚¹ã‚³ã‚¢
 * @returns {number} 0ã€œ100ã«æ­£è¦åŒ–ã•ã‚ŒãŸã‚¹ã‚³ã‚¢
 */
export function getNormalizedScore(rawScore) {
    return normalizeScore(rawScore);
}

// ============================================
// ãƒ‡ãƒãƒƒã‚°ç”¨ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
// ============================================

/**
 * æ©Ÿèƒ½ã‚¹ã‚³ã‚¢ã®è©³ç´°æƒ…å ±ã‚’å–å¾—ï¼ˆé–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ç”¨ï¼‰
 * 
 * ã€ã“ã®é–¢æ•°ã¯ä½•ã®ãŸã‚ï¼Ÿã€‘
 * 
 * é–‹ç™ºä¸­ã«ã€Œè¨ºæ–­ãŒæ­£ã—ãå‹•ã„ã¦ã‚‹ã‹ã€ç¢ºèªã™ã‚‹ãŸã‚ã€‚
 * 
 * ãƒ–ãƒ©ã‚¦ã‚¶ã®ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§:
 * ```
 * import { getDetailedFunctionScores } from './core.js';
 * const details = getDetailedFunctionScores(functionScores);
 * console.table(details);
 * ```
 * 
 * ã™ã‚‹ã¨ã€ã“ã‚“ãªè¡¨ãŒè¡¨ç¤ºã•ã‚Œã‚‹:
 * â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
 * â”‚     â”‚ name â”‚ fullName   â”‚ rawScore    â”‚ normalized   â”‚ interp â”‚
 * â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¤
 * â”‚  0  â”‚ Ni   â”‚ å†…å‘çš„ç›´è¦³   â”‚ 15.20       â”‚ 88           â”‚ éå¸¸ã«å¼·ã„ â”‚
 * â”‚  1  â”‚ Te   â”‚ å¤–å‘çš„æ€è€ƒ   â”‚ 12.50       â”‚ 81           â”‚ éå¸¸ã«å¼·ã„ â”‚
 * â”‚  2  â”‚ Ti   â”‚ å†…å‘çš„æ€è€ƒ   â”‚ 10.30       â”‚ 76           â”‚ éå¸¸ã«å¼·ã„ â”‚
 * â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 * 
 * @param {Object} functionScores - ç”Ÿã‚¹ã‚³ã‚¢
 * @returns {Array} å„æ©Ÿèƒ½ã®è©³ç´°æƒ…å ±é…åˆ—
 */
export function getDetailedFunctionScores(functionScores) {
    if (!functionScores || typeof functionScores !== 'object') {
        console.error('[getDetailedFunctionScores] å…¥åŠ›ãŒä¸æ­£ã§ã™');
        return [];
    }
    
    return Object.entries(functionScores)
        .map(([funcName, rawScore]) => {
            const normalized = normalizeScore(rawScore);
            
            // ã‚¹ã‚³ã‚¢ã®è§£é‡ˆãƒ©ãƒ™ãƒ«
            let interpretation;
            if (normalized >= 75) interpretation = "éå¸¸ã«å¼·ã„";
            else if (normalized >= 60) interpretation = "å¼·ã„";
            else if (normalized >= 40) interpretation = "å¹³å‡çš„";
            else if (normalized >= 25) interpretation = "å¼±ã„";
            else interpretation = "éå¸¸ã«å¼±ã„";
            
            return {
                name: funcName,
                fullName: FUNCTIONS[funcName]?.fullName || funcName,
                description: FUNCTIONS[funcName]?.description || "",
                rawScore: Number(rawScore.toFixed(2)),
                normalizedScore: normalized,
                percentile: `${normalized}%`,
                interpretation: interpretation
            };
        })
        .sort((a, b) => b.normalizedScore - a.normalizedScore);  // é™é †
}

/**
 * ã‚¿ã‚¤ãƒ—åˆ¤å®šã®è©³ç´°ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆï¼ˆãƒ‡ãƒãƒƒã‚°ç”¨ï¼‰
 * 
 * ã€ã“ã®é–¢æ•°ã¯ä½•ã®ãŸã‚ï¼Ÿã€‘
 * 
 * è¨ºæ–­çµæœã®ã€Œè£å´ã€ã‚’å…¨éƒ¨è¦‹ã‚‹ãŸã‚ã€‚
 * 
 * ä½¿ã„æ–¹:
 * ```
 * import { generateDiagnosticReport } from './core.js';
 * const report = generateDiagnosticReport(functionScores, COGNITIVE_STACKS);
 * console.log(JSON.stringify(report, null, 2));
 * ```
 * 
 * ã™ã‚‹ã¨ã€ã“ã‚“ãªJSONãŒå‡ºåŠ›ã•ã‚Œã‚‹:
 * ```json
 * {
 *   "timestamp": "2025-11-04T...",
 *   "result": {
 *     "determinedType": "INTJ",
 *     "confidence": "25%",
 *     "secondBestType": "INTP"
 *   },
 *   "functionScores": [...],
 *   "typeScores": [...],  // å…¨16ã‚¿ã‚¤ãƒ—ã®ãƒ©ãƒ³ã‚­ãƒ³ã‚°
 *   "stackAnalysis": {...},  // INTJã®ã‚¹ã‚¿ãƒƒã‚¯è©³ç´°
 *   "confidenceAnalysis": {...}  // ç¢ºä¿¡åº¦ã®è¨ˆç®—å†…è¨³
 * }
 * ```
 * 
 * @param {Object} functionScores - èªçŸ¥æ©Ÿèƒ½ã‚¹ã‚³ã‚¢
 * @param {Object} COGNITIVE_STACKS - æ©Ÿèƒ½ã‚¹ã‚¿ãƒƒã‚¯å®šç¾©
 * @returns {Object} è©³ç´°ãƒ¬ãƒãƒ¼ãƒˆ
 */
export function generateDiagnosticReport(functionScores, COGNITIVE_STACKS) {
    const result = determineMBTIType(functionScores, COGNITIVE_STACKS);
    const detailedScores = getDetailedFunctionScores(functionScores);
    
    const report = {
        timestamp: new Date().toISOString(),
        result: {
            determinedType: result.type,
            confidence: `${result.confidence}%`,
            secondBestType: result.top2[1]
        },
        functionScores: detailedScores,
        typeScores: Object.entries(result.typeScores)
            .sort((a, b) => b[1] - a[1])
            .map(([type, score], index) => ({
                rank: index + 1,
                type: type,
                score: Number(score.toFixed(2)),
                description: mbtiDescriptions[type]?.name || ""
            })),
        stackAnalysis: {
            determinedType: result.type,
            stack: COGNITIVE_STACKS[result.type],
            breakdown: COGNITIVE_STACKS[result.type].map((func, index) => ({
                position: ['ä¸»æ©Ÿèƒ½', 'è£œåŠ©æ©Ÿèƒ½', 'ç¬¬ä¸‰æ©Ÿèƒ½', 'åŠ£ç­‰æ©Ÿèƒ½'][index],
                function: func,
                fullName: FUNCTIONS[func].fullName,
                rawScore: functionScores[func],
                normalizedScore: normalizeScore(functionScores[func]),
                weight: [
                    JUNG_FUNCTION_WEIGHTS.DOMINANT,
                    JUNG_FUNCTION_WEIGHTS.AUXILIARY,
                    JUNG_FUNCTION_WEIGHTS.TERTIARY,
                    JUNG_FUNCTION_WEIGHTS.INFERIOR
                ][index],
                weightedScore: Number((functionScores[func] * [
                    JUNG_FUNCTION_WEIGHTS.DOMINANT,
                    JUNG_FUNCTION_WEIGHTS.AUXILIARY,
                    JUNG_FUNCTION_WEIGHTS.TERTIARY,
                    JUNG_FUNCTION_WEIGHTS.INFERIOR
                ][index]).toFixed(2))
            }))
        },
        confidenceAnalysis: {
            interpretation: result.confidence >= 30 
                ? "è¨ºæ–­çµæœã«é«˜ã„ä¿¡é ¼æ€§ãŒã‚ã‚Šã¾ã™" 
                : "è¤‡æ•°ã‚¿ã‚¤ãƒ—ã®ç‰¹æ€§ã‚’æŒã£ã¦ã„ã¾ã™ã€‚æ¬¡ç‚¹ã‚¿ã‚¤ãƒ—ã‚‚å‚è€ƒã«ã—ã¦ãã ã•ã„",
            firstTypeScore: result.typeScores[result.top2[0]],
            secondTypeScore: result.typeScores[result.top2[1]],
            scoreDifference: Number((result.typeScores[result.top2[0]] - result.typeScores[result.top2[1]]).toFixed(2))
        }
    };
    
    return report;
}

/**
 * ãƒ‡ãƒãƒƒã‚°æƒ…å ±ã‚’ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«æ•´å½¢å‡ºåŠ›
 * 
 * ã€ã“ã®é–¢æ•°ã¯ä½•ã®ãŸã‚ï¼Ÿã€‘
 * 
 * generateDiagnosticReport()ã®çµæœã‚’ã€
 * è¦‹ã‚„ã™ãæ•´å½¢ã—ã¦ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«è¡¨ç¤ºã—ã¾ã™ã€‚
 * 
 * ä½¿ã„æ–¹:
 * ```
 * import { printDiagnosticReport } from './core.js';
 * printDiagnosticReport(functionScores, COGNITIVE_STACKS);
 * ```
 * 
 * ã™ã‚‹ã¨ã€ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«:
 * ```
 * ğŸ§  MBTIè¨ºæ–­ è©³ç´°ãƒ¬ãƒãƒ¼ãƒˆ
 *   ğŸ“Š åˆ¤å®šçµæœ
 *     åˆ¤å®šã‚¿ã‚¤ãƒ—: INTJ
 *     ç¢ºä¿¡åº¦: 25%
 *     æ¬¡ç‚¹ã‚¿ã‚¤ãƒ—: INTP
 *   ğŸ¯ èªçŸ¥æ©Ÿèƒ½ã‚¹ã‚³ã‚¢
 *     â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 *     â”‚ ... â”‚ Ni   â”‚ å†…å‘çš„ç›´è¦³  â”‚ 15.20       â”‚ 88           â”‚
 *     â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 *   ğŸ† å…¨ã‚¿ã‚¤ãƒ—ãƒ©ãƒ³ã‚­ãƒ³ã‚° (ä¸Šä½5ä½)
 *   ğŸ” æ©Ÿèƒ½ã‚¹ã‚¿ãƒƒã‚¯åˆ†æ
 *   âœ… ç¢ºä¿¡åº¦åˆ†æ
 * ```
 * 
 * ã®ã‚ˆã†ã«ã€è¦‹ã‚„ã™ãè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚
 * 
 * @param {Object} functionScores - èªçŸ¥æ©Ÿèƒ½ã‚¹ã‚³ã‚¢
 * @param {Object} COGNITIVE_STACKS - æ©Ÿèƒ½ã‚¹ã‚¿ãƒƒã‚¯å®šç¾©
 * @returns {Object} ç”Ÿæˆã•ã‚ŒãŸãƒ¬ãƒãƒ¼ãƒˆï¼ˆå‚ç…§ç”¨ï¼‰
 */
export function printDiagnosticReport(functionScores, COGNITIVE_STACKS) {
    const report = generateDiagnosticReport(functionScores, COGNITIVE_STACKS);
    
    console.group('ğŸ§  MBTIè¨ºæ–­ è©³ç´°ãƒ¬ãƒãƒ¼ãƒˆ');
    
    console.group('ğŸ“Š åˆ¤å®šçµæœ');
    console.log('åˆ¤å®šã‚¿ã‚¤ãƒ—:', report.result.determinedType);
    console.log('ç¢ºä¿¡åº¦:', report.result.confidence);
    console.log('æ¬¡ç‚¹ã‚¿ã‚¤ãƒ—:', report.result.secondBestType);
    console.groupEnd();
    
    console.group('ğŸ¯ èªçŸ¥æ©Ÿèƒ½ã‚¹ã‚³ã‚¢');
    console.table(report.functionScores);
    console.groupEnd();
    
    console.group('ğŸ† å…¨ã‚¿ã‚¤ãƒ—ãƒ©ãƒ³ã‚­ãƒ³ã‚° (ä¸Šä½5ä½)');
    console.table(report.typeScores.slice(0, 5));
    console.groupEnd();
    
    console.group('ğŸ” æ©Ÿèƒ½ã‚¹ã‚¿ãƒƒã‚¯åˆ†æ');
    console.log('ã‚¿ã‚¤ãƒ—:', report.stackAnalysis.determinedType);
    console.log('ã‚¹ã‚¿ãƒƒã‚¯:', report.stackAnalysis.stack.join(' â†’ '));
    console.table(report.stackAnalysis.breakdown);
    console.groupEnd();
    
    console.group('âœ… ç¢ºä¿¡åº¦åˆ†æ');
    console.log('è§£é‡ˆ:', report.confidenceAnalysis.interpretation);
    console.log('1ä½ã‚¹ã‚³ã‚¢:', report.confidenceAnalysis.firstTypeScore);
    console.log('2ä½ã‚¹ã‚³ã‚¢:', report.confidenceAnalysis.secondTypeScore);
    console.log('ã‚¹ã‚³ã‚¢å·®:', report.confidenceAnalysis.scoreDifference);
    console.groupEnd();
    
    console.groupEnd();
    
    return report;
}

// ============================================
// ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ç”¨ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ï¼ˆå¤–éƒ¨å…¬é–‹ï¼‰
// ============================================

/**
 * èªçŸ¥æ©Ÿèƒ½ã‚¹ã‚³ã‚¢ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å¦¥å½“æ€§æ¤œè¨¼
 * 
 * ã€ã“ã®é–¢æ•°ã¯ä½•ã®ãŸã‚ï¼Ÿã€‘
 * 
 * functionScoresã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒæ­£ã—ã„å½¢å¼ã‹ãƒã‚§ãƒƒã‚¯ã—ã¾ã™ã€‚
 * 
 * ãƒã‚§ãƒƒã‚¯å†…å®¹:
 * 1. ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‹ã©ã†ã‹
 * 2. 8ã¤ã®å¿…é ˆæ©Ÿèƒ½ï¼ˆNi, Ne, Si, Se, Ti, Te, Fi, Feï¼‰ãŒå…¨ã¦å­˜åœ¨ã™ã‚‹ã‹
 * 3. å„ã‚¹ã‚³ã‚¢ãŒæ•°å€¤ã‹ã©ã†ã‹
 * 4. å„ã‚¹ã‚³ã‚¢ãŒæœ‰é™å€¤ã‹ã©ã†ã‹ï¼ˆInfinity, NaNã˜ã‚ƒãªã„ã‹ï¼‰
 * 
 * ä½¿ã„æ–¹:
 * ```
 * const validation = validateFunctionScores(functionScores);
 * if (!validation.isValid) {
 *   console.error('ã‚¨ãƒ©ãƒ¼:', validation.errors);
 * }
 * ```
 * 
 * @param {Object} functionScores - æ¤œè¨¼å¯¾è±¡
 * @returns {Object} { isValid: boolean, errors: string[] }
 *   ä¾‹: { isValid: false, errors: ["å¿…é ˆæ©Ÿèƒ½ Ni ãŒå­˜åœ¨ã—ã¾ã›ã‚“"] }
 */
export function validateFunctionScores(functionScores) {
    const errors = [];  // ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è²¯ã‚ã‚‹é…åˆ—
    
    // ãƒã‚§ãƒƒã‚¯1: ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‹ã©ã†ã‹
    if (!functionScores || typeof functionScores !== 'object') {
        errors.push('functionScoresãŒã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã‚ã‚Šã¾ã›ã‚“');
        return { isValid: false, errors };
    }
    
    // å¿…é ˆã®8æ©Ÿèƒ½
    const requiredFunctions = ['Ni', 'Ne', 'Si', 'Se', 'Ti', 'Te', 'Fi', 'Fe'];
    
    // ãƒã‚§ãƒƒã‚¯2ã€œ4: å„æ©Ÿèƒ½ã«ã¤ã„ã¦
    for (const func of requiredFunctions) {
        // ãƒã‚§ãƒƒã‚¯2: å­˜åœ¨ã™ã‚‹ã‹
        if (!(func in functionScores)) {
            errors.push(`å¿…é ˆæ©Ÿèƒ½ ${func} ãŒå­˜åœ¨ã—ã¾ã›ã‚“`);
        } 
        // ãƒã‚§ãƒƒã‚¯3: æ•°å€¤ã‹
        else if (typeof functionScores[func] !== 'number') {
            errors.push(`${func} ã®ã‚¹ã‚³ã‚¢ãŒæ•°å€¤ã§ã¯ã‚ã‚Šã¾ã›ã‚“: ${functionScores[func]}`);
        } 
        // ãƒã‚§ãƒƒã‚¯4: æœ‰é™å€¤ã‹ï¼ˆInfinity, NaNã˜ã‚ƒãªã„ã‹ï¼‰
        else if (!isFinite(functionScores[func])) {
            errors.push(`${func} ã®ã‚¹ã‚³ã‚¢ãŒæœ‰é™å€¤ã§ã¯ã‚ã‚Šã¾ã›ã‚“: ${functionScores[func]}`);
        }
    }
    
    return {
        isValid: errors.length === 0,  // ã‚¨ãƒ©ãƒ¼ãŒãªã‘ã‚Œã°true
        errors: errors
    };
}

// ============================================
// ãƒ†ã‚¹ãƒˆç”¨ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°
// ============================================

/**
 * ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ç”¨ã®ãƒ€ãƒŸãƒ¼ã‚¹ã‚³ã‚¢ç”Ÿæˆ
 * 
 * ã€ã“ã®é–¢æ•°ã¯ä½•ã®ãŸã‚ï¼Ÿã€‘
 * 
 * ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã‚’æ›¸ãã¨ãã«ã€
 * ã€ŒINTJã£ã½ã„ã‚¹ã‚³ã‚¢ã€ã‚’è‡ªå‹•ç”Ÿæˆã—ã¾ã™ã€‚
 * 
 * ä½¿ã„æ–¹:
 * ```
 * const intjScores = generateMockScores('INTJ');
 * const result = determineMBTIType(intjScores, COGNITIVE_STACKS);
 * console.assert(result.type === 'INTJ', 'INTJã¨è¨ºæ–­ã•ã‚Œã‚‹ã¯ãš');
 * ```
 * 
 * ç”Ÿæˆãƒ«ãƒ¼ãƒ«:
 * - ä¸»æ©Ÿèƒ½: +15ï¼ˆé«˜ã‚¹ã‚³ã‚¢ï¼‰
 * - è£œåŠ©æ©Ÿèƒ½: +10ï¼ˆä¸­ã‚¹ã‚³ã‚¢ï¼‰
 * - ç¬¬ä¸‰æ©Ÿèƒ½: +5ï¼ˆä½ã‚¹ã‚³ã‚¢ï¼‰
 * - åŠ£ç­‰æ©Ÿèƒ½: -5ï¼ˆè² ã®ã‚¹ã‚³ã‚¢ï¼‰
 * - ãã®ä»–ã®æ©Ÿèƒ½: 0
 * 
 * @param {string} targetType - ç”Ÿæˆã—ãŸã„MBTIã‚¿ã‚¤ãƒ—ï¼ˆä¾‹: "INTJ"ï¼‰
 * @returns {Object} ãã®ã‚¿ã‚¤ãƒ—ã«é©åˆã™ã‚‹æ©Ÿèƒ½ã‚¹ã‚³ã‚¢
 *   ä¾‹: { Ni: 15, Te: 10, Fi: 5, Se: -5, Ne: 0, Si: 0, Ti: 0, Fe: 0 }
 */
export function generateMockScores(targetType) {
    // å­˜åœ¨ã—ãªã„ã‚¿ã‚¤ãƒ—ãªã‚‰nullã‚’è¿”ã™
    if (!(targetType in COGNITIVE_STACKS)) {
        console.error(`[generateMockScores] ä¸æ­£ãªã‚¿ã‚¤ãƒ—: ${targetType}`);
        return null;
    }
    
    const stack = COGNITIVE_STACKS[targetType];
    
    // å…¨æ©Ÿèƒ½ã‚’0ã§åˆæœŸåŒ–
    const mockScores = {
        Ni: 0, Ne: 0, Si: 0, Se: 0,
        Ti: 0, Te: 0, Fi: 0, Fe: 0
    };
    
    // ã‚¹ã‚¿ãƒƒã‚¯å†…ã®4æ©Ÿèƒ½ã«æ®µéšçš„ãªã‚¹ã‚³ã‚¢ã‚’å‰²ã‚Šå½“ã¦
    mockScores[stack[0]] = 15;   // ä¸»æ©Ÿèƒ½: é«˜ã‚¹ã‚³ã‚¢
    mockScores[stack[1]] = 10;   // è£œåŠ©æ©Ÿèƒ½: ä¸­ã‚¹ã‚³ã‚¢
    mockScores[stack[2]] = 5;    // ç¬¬ä¸‰æ©Ÿèƒ½: ä½ã‚¹ã‚³ã‚¢
    mockScores[stack[3]] = -5;   // åŠ£ç­‰æ©Ÿèƒ½: è² ã®ã‚¹ã‚³ã‚¢
    
    return mockScores;
}

/**
 * å®šæ•°å€¤ã®æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯ï¼ˆé–‹ç™ºæ™‚ã®è‡ªå·±è¨ºæ–­ï¼‰
 * 
 * ã€ã“ã®é–¢æ•°ã¯ä½•ã®ãŸã‚ï¼Ÿã€‘
 * 
 * ã‚³ãƒ¼ãƒ‰ã‚’ä¿®æ­£ã—ãŸã¨ãã«ã€
 * ã€Œå®šæ•°ãŒãŠã‹ã—ããªã£ã¦ãªã„ã‹ã€ã‚’è‡ªå‹•ã§ãƒã‚§ãƒƒã‚¯ã—ã¾ã™ã€‚
 * 
 * ãƒã‚§ãƒƒã‚¯å†…å®¹:
 * 1. Jungé‡ã¿ãŒæ­£ã—ãé™é †ï¼ˆ4.0 â‰¥ 2.0 â‰¥ 1.0 â‰¥ 0.5ï¼‰
 * 2. ã‚¹ã‚³ã‚¢å¼·èª¿æŒ‡æ•°ãŒå¦¥å½“ãªç¯„å›²ï¼ˆ1.0ã€œ2.0ï¼‰
 * 3. æ­£è¦åŒ–ç¯„å›²ã®å¦¥å½“æ€§ï¼ˆMIN < MAXï¼‰
 * 4. èªçŸ¥æ©Ÿèƒ½ãŒ8ã¤å®šç¾©ã•ã‚Œã¦ã„ã‚‹ã‹
 * 5. MBTIã‚¿ã‚¤ãƒ—ãŒ16å€‹å®šç¾©ã•ã‚Œã¦ã„ã‚‹ã‹
 * 
 * ä½¿ã„æ–¹:
 * ```
 * import { validateConstants } from './core.js';
 * const isOK = validateConstants();
 * if (!isOK) {
 *   console.error('å®šæ•°ãŒãŠã‹ã—ã„ã§ã™ï¼');
 * }
 * ```
 * 
 * @returns {boolean} ã™ã¹ã¦ã®å®šæ•°ãŒå¦¥å½“ãªå ´åˆtrue
 */
export function validateConstants() {
    const checks = [];
    
    // ãƒã‚§ãƒƒã‚¯1: Jungé‡ã¿ãŒé™é †ã‹
    checks.push({
        name: 'Jungé‡ã¿ã®é™é †ãƒã‚§ãƒƒã‚¯',
        pass: JUNG_FUNCTION_WEIGHTS.DOMINANT >= JUNG_FUNCTION_WEIGHTS.AUXILIARY &&
              JUNG_FUNCTION_WEIGHTS.AUXILIARY >= JUNG_FUNCTION_WEIGHTS.TERTIARY &&
              JUNG_FUNCTION_WEIGHTS.TERTIARY >= JUNG_FUNCTION_WEIGHTS.INFERIOR
    });
    
    // ãƒã‚§ãƒƒã‚¯2: ã‚¹ã‚³ã‚¢å¼·èª¿æŒ‡æ•°ãŒå¦¥å½“ãªç¯„å›²ã‹
    // 1.0ï¼ˆç·šå½¢ï¼‰ã€œ2.0ï¼ˆå¼·ã„éç·šå½¢ï¼‰ã®ç¯„å›²å†…ãŒå¦¥å½“
    checks.push({
        name: 'ã‚¹ã‚³ã‚¢å¼·èª¿æŒ‡æ•°ã®ç¯„å›²ãƒã‚§ãƒƒã‚¯',
        pass: SCORE_EMPHASIS_EXPONENT >= 1.0 && SCORE_EMPHASIS_EXPONENT <= 2.0
    });
    
    // ãƒã‚§ãƒƒã‚¯3: æ­£è¦åŒ–ç¯„å›²ã®å¦¥å½“æ€§
    // æœ€å°å€¤ < æœ€å¤§å€¤ ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèª
    checks.push({
        name: 'æ­£è¦åŒ–ç¯„å›²ã®å¦¥å½“æ€§ãƒã‚§ãƒƒã‚¯',
        pass: SCORE_NORMALIZATION.MIN < SCORE_NORMALIZATION.MAX &&
              SCORE_NORMALIZATION.OUTPUT_MIN < SCORE_NORMALIZATION.OUTPUT_MAX
    });
    
    // ãƒã‚§ãƒƒã‚¯4: èªçŸ¥æ©Ÿèƒ½ãŒ8ã¤å®šç¾©ã•ã‚Œã¦ã„ã‚‹ã‹
    checks.push({
        name: 'èªçŸ¥æ©Ÿèƒ½å®šç¾©ã®å®Œå…¨æ€§ãƒã‚§ãƒƒã‚¯',
        pass: Object.keys(FUNCTIONS).length === 8
    });
    
    // ãƒã‚§ãƒƒã‚¯5: MBTIã‚¿ã‚¤ãƒ—ãŒ16å€‹å®šç¾©ã•ã‚Œã¦ã„ã‚‹ã‹
    checks.push({
        name: 'MBTIã‚¿ã‚¤ãƒ—å®šç¾©ã®å®Œå…¨æ€§ãƒã‚§ãƒƒã‚¯',
        pass: Object.keys(COGNITIVE_STACKS).length === 16 &&
              Object.keys(mbtiDescriptions).length === 16
    });
    
    // ã™ã¹ã¦ã®ãƒã‚§ãƒƒã‚¯ãŒpassãªã‚‰true
    const allPassed = checks.every(check => check.pass);
    
    // å¤±æ•—ã—ãŸãƒã‚§ãƒƒã‚¯ãŒã‚ã‚Œã°ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«è¡¨ç¤º
    if (!allPassed) {
        console.error('âš ï¸ å®šæ•°ã®æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯ã«å¤±æ•—ã—ã¾ã—ãŸ:');
        checks.filter(c => !c.pass).forEach(c => {
            console.error(`  âœ— ${c.name}`);
        });
    } else {
        console.log('âœ… ã™ã¹ã¦ã®å®šæ•°ãƒã‚§ãƒƒã‚¯ã«åˆæ ¼ã—ã¾ã—ãŸ');
    }
    
    return allPassed;
}

// ============================================
// èµ·å‹•æ™‚ã®è‡ªå‹•ãƒã‚§ãƒƒã‚¯ï¼ˆé–‹ç™ºç’°å¢ƒã®ã¿ï¼‰
// ============================================

/**
 * é–‹ç™ºç’°å¢ƒã§ã®è‡ªå‹•ãƒã‚§ãƒƒã‚¯
 * 
 * ã€ä½•ã‚’ã—ã¦ã‚‹ï¼Ÿã€‘
 * 
 * ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒèª­ã¿è¾¼ã¾ã‚ŒãŸã¨ãã€
 * é–‹ç™ºç’°å¢ƒãªã‚‰è‡ªå‹•çš„ã«validateConstants()ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚
 * 
 * ã“ã‚Œã«ã‚ˆã‚Š:
 * - å®šæ•°ã‚’é–“é•ã£ã¦ä¿®æ­£ã—ãŸã‚‰ã™ãæ°—ã¥ã‘ã‚‹
 * - æœ¬ç•ªç’°å¢ƒã§ã¯å®Ÿè¡Œã•ã‚Œãªã„ï¼ˆä¸è¦ãªå‡¦ç†ã‚’é¿ã‘ã‚‹ï¼‰
 * 
 * ã€ã©ã†ã‚„ã£ã¦é–‹ç™ºç’°å¢ƒã‚’åˆ¤å®šï¼Ÿã€‘
 * 
 * Node.jsç’°å¢ƒã®å ´åˆ:
 * - process.env.NODE_ENV === 'development' ã§åˆ¤å®š
 * 
 * ãƒ–ãƒ©ã‚¦ã‚¶ç’°å¢ƒã®å ´åˆ:
 * - ã“ã®åˆ¤å®šã¯å‹•ã‹ãªã„ï¼ˆprocessãŒãªã„ï¼‰
 * - ã§ã‚‚å•é¡Œãªã„ï¼ˆé–‹ç™ºä¸­ã¯ãƒ­ãƒ¼ã‚«ãƒ«ã‚µãƒ¼ãƒãƒ¼ã§å®Ÿè¡Œã™ã‚‹ã‹ã‚‰ï¼‰
 */
if (typeof process !== 'undefined' && process.env?.NODE_ENV === 'development') {
    validateConstants();
}

// ============================================
// ã¾ã¨ã‚: ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã§ä½•ã‚’ã—ã¦ã‚‹ã‹
// ============================================

/**
 * ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆcore.jsï¼‰ã®å½¹å‰²:
 * 
 * 1. ã€å®šæ•°å®šç¾©ã€‘
 *    - Jungç†è«–ã«åŸºã¥ãé‡ã¿ä»˜ã‘ï¼ˆ4:2:1:0.5ï¼‰
 *    - ã‚¹ã‚³ã‚¢è¨ˆç®—ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼ˆæŒ‡æ•°1.2ãªã©ï¼‰
 *    - æ­£è¦åŒ–ã®ç¯„å›²ï¼ˆ-20ã€œ+20 â†’ 0ã€œ100ï¼‰
 * 
 * 2. ã€ã‚¹ã‚³ã‚¢è¨ˆç®—ã€‘
 *    - calculateScore(): 1ã¤ã®å›ç­”ã‚’ã‚¹ã‚³ã‚¢ã«å¤‰æ›
 *    - normalizeScore(): ç”Ÿã‚¹ã‚³ã‚¢ã‚’0ã€œ100%ã«æ­£è¦åŒ–
 * 
 * 3. ã€ã‚¿ã‚¤ãƒ—åˆ¤å®šã€‘
 *    - determineMBTIType(): 16ã‚¿ã‚¤ãƒ—ã®ä¸­ã‹ã‚‰æœ€é©ãªã‚‚ã®ã‚’é¸ã¶
 *    - ç¢ºä¿¡åº¦ã®è¨ˆç®—
 * 
 * 4. ã€ãƒ‡ãƒãƒƒã‚°ãƒ„ãƒ¼ãƒ«ã€‘
 *    - getDetailedFunctionScores(): ã‚¹ã‚³ã‚¢ã®è©³ç´°è¡¨ç¤º
 *    - generateDiagnosticReport(): è¨ºæ–­ã®è£å´ã‚’å…¨éƒ¨è¦‹ã‚‹
 *    - printDiagnosticReport(): ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«æ•´å½¢å‡ºåŠ›
 * 
 * 5. ã€å“è³ªä¿è¨¼ã€‘
 *    - validateFunctionScores(): å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã®æ¤œè¨¼
 *    - validateConstants(): å®šæ•°ã®æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯
 *    - generateMockScores(): ãƒ†ã‚¹ãƒˆç”¨ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆ
 * 
 * ã€ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒå¤§åˆ‡ã«ã—ã¦ã‚‹ã“ã¨ã€‘
 * 
 * - æ­£ç›´ã•: ã€Œå®Ÿè¨¼å®Ÿé¨“ã—ã¦ãªã„ã€ã¨ã¡ã‚ƒã‚“ã¨æ›¸ã
 * - ã‚ã‹ã‚Šã‚„ã™ã•: é–€å¤–æ¼¢ã§ã‚‚ç†è§£ã§ãã‚‹ã‚³ãƒ¡ãƒ³ãƒˆ
 * - æ ¹æ‹ : ãªãœãã®å€¤ã‚’é¸ã‚“ã ã‹æ˜è¨˜
 * - ä¿å®ˆæ€§: å°†æ¥ã®è‡ªåˆ†ï¼ˆã‚„ä»–ã®äººï¼‰ãŒèª­ã‚“ã§ã‚‚ç†è§£ã§ãã‚‹
 * - å …ç‰¢æ€§: ã‚¨ãƒ©ãƒ¼ãŒèµ·ãã¦ã‚‚å£Šã‚Œãªã„
 * 
 * ã€ç§‘å­¦çš„ãªé™ç•Œã€‘
 * 
 * ã“ã®ã‚³ãƒ¼ãƒ‰ã¯:
 * âœ… å¿ƒç†å­¦ã®ç†è«–ï¼ˆJung, Stevensï¼‰ã«åŸºã¥ã„ã¦ã„ã‚‹
 * âœ… å¤šãã®è¨ºæ–­ãƒ„ãƒ¼ãƒ«ã§æ¡ç”¨ã•ã‚Œã¦ã„ã‚‹æ‰‹æ³•
 * âŒ ã§ã‚‚ã€Œç§‘å­¦çš„ã«å®Œå…¨ã«è¨¼æ˜ã•ã‚ŒãŸã€ã‚ã‘ã˜ã‚ƒãªã„
 * 
 * MBTIè‡ªä½“ãŒã€Œè‡ªå·±ç†è§£ã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã€ã§ã‚ã‚Šã€
 * ã€Œçµ¶å¯¾çš„ãªçœŸå®Ÿã€ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚
 * 
 * ã ã‹ã‚‰:
 * - è¨ºæ–­çµæœã¯ã€Œå‚è€ƒæƒ…å ±ã€ã¨ã—ã¦ä½¿ã†
 * - ã€Œã‚ãªãŸã¯çµ¶å¯¾ã«INTJã€ã˜ã‚ƒãªãã€ŒINTJã®ç‰¹å¾´ãŒå¼·ã„ã€
 * - ä»–ã®ã‚¿ã‚¤ãƒ—ã®ç‰¹æ€§ã‚‚æŒã£ã¦ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹
 * 
 * ãã‚Œã§ã‚‚:
 * - è‡ªåˆ†ã‚’çŸ¥ã‚‹ãã£ã‹ã‘ã«ãªã‚‹
 * - ä»–è€…ç†è§£ã®ãƒ’ãƒ³ãƒˆã«ãªã‚‹
 * - ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒå††æ»‘ã«ãªã‚‹
 * 
 * ãã†ã„ã†ã€Œå®Ÿç”¨çš„ãªä¾¡å€¤ã€ã¯ã‚ã‚Šã¾ã™ã€‚
 */